<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Notes on Liberation Notes</title>
    <link>https://blog.cmwang.net/zh/categories/notes/</link>
    <description>Recent content in Notes on Liberation Notes</description>
    <image>
      <title>Liberation Notes</title>
      <url>https://blog.cmwang.net/47</url>
      <link>https://blog.cmwang.net/47</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Mon, 16 Oct 2023 14:04:06 +0800</lastBuildDate><atom:link href="https://blog.cmwang.net/zh/categories/notes/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>åœ¨ Ubuntu å®‰è£ Nvidia Docker</title>
      <link>https://blog.cmwang.net/zh/posts/2023/10/install-nvidia-docker-for-ubuntu/</link>
      <pubDate>Mon, 16 Oct 2023 14:04:06 +0800</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2023/10/install-nvidia-docker-for-ubuntu/</guid>
      <description>é€™ç¯‡æ–‡ç« åªæœ‰è‹±æ–‡ç‰ˆçš„</description>
      <content:encoded><![CDATA[<h2 id="uninstall-docker">Uninstall Docker</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl stop docker
</span></span><span class="line"><span class="cl">sudo apt remove --purge -y docker-ce docker-ce-cli containerd.io
</span></span><span class="line"><span class="cl">sudo rm -rf /var/lib/docker
</span></span><span class="line"><span class="cl">sudo rm -rf /etc/docker
</span></span><span class="line"><span class="cl">sudo rm -rf /etc/apt/sources.list.d/docker.list
</span></span><span class="line"><span class="cl">sudo rm -rf /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">docker --version
</span></span></code></pre></div><h2 id="install-docker-ubuntu-2204">Install Docker (Ubuntu 22.04)</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo apt install -y <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-transport-https <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    ca-certificates <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    curl <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    gnupg-agent <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    software-properties-common
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&#34;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install -y docker-ce docker-ce-cli containerd.io
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># post install</span>
</span></span><span class="line"><span class="cl">sudo systemctl status docker
</span></span><span class="line"><span class="cl">sudo usermod -aG docker <span class="si">${</span><span class="nv">USER</span><span class="si">}</span>
</span></span></code></pre></div><h2 id="move-docker-data-to-another-location">Move Docker Data to Another Location</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl stop docker
</span></span><span class="line"><span class="cl">sudo systemctl status docker
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ex: /data/ is another disk, don&#39;t create docker-data folder in advanced</span>
</span></span><span class="line"><span class="cl">sudo rsync -avxP /var/lib/docker/  /data/docker-data
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># edit daemon.json with `data-root` line</span>
</span></span><span class="line"><span class="cl">sudo nano /etc/docker/daemon.json
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;data-root&#34;</span>: <span class="s2">&#34;/data/docker-data&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;runtimes&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;nvidia&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;args&#34;</span>: <span class="o">[]</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;path&#34;</span>: <span class="s2">&#34;nvidia-container-runtime&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> docker
</span></span><span class="line"><span class="cl"><span class="c1"># verify</span>
</span></span><span class="line"><span class="cl">docker info -f <span class="s1">&#39;{{ .DockerRootDir}}&#39;</span>
</span></span></code></pre></div><h2 id="install-nvidia-driver--cuda">Install Nvidia Driver &amp; Cuda</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-ubuntu2204.pin
</span></span><span class="line"><span class="cl">sudo mv cuda-ubuntu2204.pin /etc/apt/preferences.d/cuda-repository-pin-600
</span></span><span class="line"><span class="cl">wget https://developer.download.nvidia.com/compute/cuda/12.2.2/local_installers/cuda-repo-ubuntu2204-12-2-local_12.2.2-535.104.05-1_amd64.deb
</span></span><span class="line"><span class="cl">sudo dpkg -i cuda-repo-ubuntu2204-12-2-local_12.2.2-535.104.05-1_amd64.deb
</span></span><span class="line"><span class="cl">sudo cp /var/cuda-repo-ubuntu2204-12-2-local/cuda-*-keyring.gpg /usr/share/keyrings/
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get -y install cuda
</span></span></code></pre></div><h2 id="install-nvidia-docker-toolkit">Install Nvidia Docker Toolkit</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey <span class="p">|</span> sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    sed <span class="s1">&#39;s#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g&#39;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    sudo apt-get update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo apt-get install -y nvidia-container-toolkit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># verify</span>
</span></span><span class="line"><span class="cl">docker run --rm --gpus all nvidia/cuda:11.6.2-base-ubuntu20.04 nvidia-smi
</span></span></code></pre></div><h2 id="install-docker-compose">Install Docker Compose</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># https://docs.docker.com/compose/install/</span>
</span></span><span class="line"><span class="cl">sudo curl -L <span class="s2">&#34;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname -m<span class="k">)</span><span class="s2">&#34;</span> -o /usr/local/bin/docker-compose
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo chmod +x /usr/local/bin/docker-compose
</span></span></code></pre></div><hr>
<h2 id="references">References</h2>
<ul>
<li><a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=22.04&amp;target_type=deb_local">CUDA Toolkit 12.2 Update 2 Downloads</a></li>
<li><a href="https://jackfrisht.medium.com/install-nvidia-driver-via-ppa-in-ubuntu-18-04-fc9a8c4658b9">å®‰è£ Nvidia driver 535 CUDA 12.2 cudnn 12.x on Ubuntu 22.04</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>é€é Docker è¨­å®š Gitlab Runner</title>
      <link>https://blog.cmwang.net/zh/posts/2023/10/install-gitlab-runner/</link>
      <pubDate>Sat, 14 Oct 2023 21:13:26 +0800</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2023/10/install-gitlab-runner/</guid>
      <description>å¦‚ä½•åœ¨æœ¬æ©Ÿé€é Docker å®‰è£ Gitlab runner</description>
      <content:encoded><![CDATA[<ol>
<li>ä½¿ç”¨ System Volumn æ›è¼‰ Runner Containerï¼ŒåŸ·è¡Œ Gitlab Runnerã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">docker run -d --name gitlab-runner --restart always <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -v /srv/gitlab-runner/config:/etc/gitlab-runner <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  gitlab/gitlab-runner:latest
</span></span></code></pre></div><ol start="2">
<li>å»ºç«‹ä¸€å€‹æ–°çš„ Group runnerã€‚</li>
</ol>
<p><img loading="lazy" src="1.png" alt="group runner"  />
</p>
<p>ğŸ‘‰ <em>æ–°å¢ Group runner æ¨™ç±¤</em></p>
<p><img loading="lazy" src="2.png" alt="add tag"  />
</p>
<p>ğŸ‘‰ <em>ç²å– token</em></p>
<p><img loading="lazy" src="3.png" alt="get token"  />
</p>
<p>æ›´è©³ç´°çš„æ­¥é©Ÿå¯ä»¥åƒè€ƒé€™ç¯‡<a href="https://docs.gitlab.com/ee/ci/runners/runners_scope.html#create-a-group-runner-with-a-runner-authentication-token">æ–‡ç« </a>ã€‚</p>
<ol start="3">
<li>è¨»å†Š Runner</li>
</ol>
<p>åˆ¥å¿˜äº†å°‡ Token æ›æˆä¸Šä¸€æ­¥å¾—åˆ°çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">RUNNER_TOKEN</span><span class="o">=</span><span class="s2">&#34;glrt-vTJPYBaajfypaShJH2xx&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run --rm -v /srv/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --non-interactive <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --url <span class="s2">&#34;https://gitlab.com/&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --token <span class="s2">&#34;</span><span class="nv">$RUNNER_TOKEN</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --executor <span class="s2">&#34;docker&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --docker-image docker:stable-dind <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --description <span class="s2">&#34;docker-runner&#34;</span>
</span></span></code></pre></div><ol start="4">
<li>ç·¨è¼¯ <code>/srv/gitlab-runner/config/config.toml</code></li>
</ol>
<p>ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š</p>
<ul>
<li><code>concurrent</code>ï¼šå¯é¸</li>
<li><code>privileged</code></li>
<li><code>volumes</code>ï¼šdocker å…§éƒ¨çš„ docker</li>
<li><code>network_mode</code>ï¼šå¯é¸</li>
</ul>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            /srv/gitlab-runner/config/config.toml
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="nx">concurrent</span> <span class="p">=</span> <span class="mi">4</span> <span class="c"># æ›´æ”¹</span>
</span></span><span class="line"><span class="cl"><span class="nx">check_interval</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nx">shutdown_timeout</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">session_server</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">session_timeout</span> <span class="p">=</span> <span class="mi">1800</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">runners</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;docker-runner&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;https://gitlab.com/&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">id</span> <span class="p">=</span> <span class="mi">28470179</span>
</span></span><span class="line"><span class="cl">  <span class="nx">token</span> <span class="p">=</span> <span class="s2">&#34;glrt-vTJPYBaajfypaShJH2Ge&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">token_obtained_at</span> <span class="p">=</span> <span class="ld">2023-10-14T12:45:43Z</span>
</span></span><span class="line"><span class="cl">  <span class="nx">token_expires_at</span> <span class="p">=</span> <span class="ld">0001-01-01T00:00:00Z</span>
</span></span><span class="line"><span class="cl">  <span class="nx">executor</span> <span class="p">=</span> <span class="s2">&#34;docker&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="nx">runners</span><span class="p">.</span><span class="nx">cache</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nx">MaxUploadedArchiveSize</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="nx">runners</span><span class="p">.</span><span class="nx">docker</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nx">tls_verify</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="nx">image</span> <span class="p">=</span> <span class="s2">&#34;docker:stable-dind&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">privileged</span> <span class="p">=</span> <span class="kc">true</span> <span class="c"># æ›´æ”¹</span>
</span></span><span class="line"><span class="cl">    <span class="nx">disable_entrypoint_overwrite</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="nx">oom_kill_disable</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="nx">disable_cache</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="c">#volumes = [&#34;/cache&#34;] # æ›´æ”¹</span>
</span></span><span class="line"><span class="cl">    <span class="nx">volumes</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;/cache&#34;</span><span class="p">,</span> <span class="s2">&#34;/var/run/docker.sock:/run/docker.sock&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nx">shm_size</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="nx">network_mode</span> <span class="p">=</span> <span class="s2">&#34;host&#34;</span> <span class="c"># æ–°å¢</span>
</span></span></code></pre></div></div>
</div>
<br />

<ol start="6">
<li>é‡æ–°å•Ÿå‹• Runner</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">docker restart gitlab-runner
</span></span></code></pre></div><hr>
<h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™</h2>
<ul>
<li><a href="https://docs.gitlab.com/runner/install/">Install GitLab Runner</a></li>
<li><a href="https://docs.gitlab.com/runner/install/docker.html">Run GitLab Runner in a container</a></li>
<li><a href="https://docs.gitlab.com/runner/register/index.html">Registering runners </a></li>
<li><a href="https://docs.gitlab.com/ee/ci/runners/runners_scope.html#create-a-group-runner-with-a-runner-authentication-token">Create a group runner with a runner authentication token</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨ Ubuntu è¨­å®š Powerlevel10k</title>
      <link>https://blog.cmwang.net/zh/posts/2023/10/install-powerlevel10k-on-ubuntu/</link>
      <pubDate>Fri, 13 Oct 2023 15:40:06 +0800</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2023/10/install-powerlevel10k-on-ubuntu/</guid>
      <description>è¨˜éŒ„å¦‚ä½•åœ¨ Ubuntu è¨­å®š zsh èˆ‡ Powerlevel10k åŠ zsh-autosuggestions</description>
      <content:encoded><![CDATA[<h2 id="å®‰è£-powerlevel10k-">å®‰è£ Powerlevel10K ğŸš€</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install zsh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£ Oh My Zshï¼š</span>
</span></span><span class="line"><span class="cl">sh -c <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£ä¸»é¡Œ</span>
</span></span><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://github.com/romkatv/powerlevel10k.git ~/.oh-my-zsh/custom/themes/powerlevel10k
</span></span></code></pre></div><ol>
<li>
<p><strong>å®‰è£ Zshï¼š</strong></p>
<p>å¦‚æœä½ æ²’æœ‰å®‰è£ Zshï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install zsh
</span></span></code></pre></div></li>
<li>
<p><strong>å®‰è£ Oh My Zshï¼š</strong></p>
<p>åŸ·è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£ Oh My Zshï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sh -c <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span></code></pre></div></li>
<li>
<p><strong>å®‰è£ Powerlevel10k ä¸»é¡Œï¼š</strong></p>
<p>å°‡ Powerlevel10k Repo Clone åˆ° Oh My Zsh çš„è‡ªå®šç¾©ä¸»é¡Œç›®éŒ„ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://github.com/romkatv/powerlevel10k.git ~/.oh-my-zsh/custom/themes/powerlevel10k
</span></span></code></pre></div></li>
<li>
<p><strong>è¨­å®š Zsh ä¸»é¡Œï¼š</strong></p>
<p>é–‹å•Ÿä½ çš„ <code>~/.zshrc</code> æª”æ¡ˆï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nano ~/.zshrc
</span></span></code></pre></div><p>æ‰¾åˆ°ä»¥ <code>ZSH_THEME</code> é–‹é ­çš„é‚£ä¸€è¡Œï¼Œä¸¦å°‡å…¶æ”¹ç‚ºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">ZSH_THEME</span><span class="o">=</span><span class="s2">&#34;powerlevel10k/powerlevel10k&#34;</span>
</span></span></code></pre></div><p>å„²å­˜æª”æ¡ˆä¸¦é€€å‡ºã€‚</p>
</li>
<li>
<p><strong>å®‰è£æ‰€éœ€å­—å‹ï¼š</strong></p>
<p>Powerlevel10k ä½¿ç”¨ç‰¹æ®Šå­—å…ƒï¼Œå› æ­¤ä½ éœ€è¦å®‰è£åŒ…å«é€™äº›å­—å…ƒçš„å­—å‹ã€‚Nerd Fonts æ˜¯å¸¸ç”¨çš„é¸æ“‡ã€‚æŒ‰ç…§ <a href="https://github.com/ryanoasis/nerd-fonts">Nerd Fonts GitHub å€‰åº«</a> ä¸Šçš„èªªæ˜å®‰è£ç›¸å®¹çš„å­—å‹ã€‚</p>
</li>
<li>
<p><strong>é…ç½® Powerlevel10kï¼ˆå¯é¸ï¼‰ï¼š</strong></p>
<p>ç•¶ä½ å•Ÿå‹•æ–°çš„ Terminal æ™‚ï¼ŒPowerlevel10k å°‡æä¾›åŸ·è¡Œé…ç½®å¼•å°çš„é¸é …ã€‚æŒ‰ç…§æŒ‡ç¤ºè‡ªå®šç¾©ä½ çš„æç¤ºç¬¦ã€‚</p>
</li>
<li>
<p><strong>é‡å•Ÿ Zshï¼š</strong></p>
<p>é‡æ–°å•Ÿå‹•ä½ çš„ Terminalï¼Œæˆ–è€…åŸ·è¡Œ <code>source ~/.zshrc</code> ä»¥å¥—ç”¨æ›´æ”¹ã€‚</p>
</li>
</ol>
<p>ç¾åœ¨ï¼ŒPowerlevel10k æ‡‰è©²å·²ç¶“åœ¨ä½ çš„ Ubuntu 22.04 ç³»çµ±ä¸Šå®‰è£ä¸¦é…ç½®å®Œæˆã€‚</p>
<h2 id="å®‰è£-zsh-autosuggestions-">å®‰è£ zsh-autosuggestions ğŸš€</h2>
<p>Powerlevel10k ä¸æœƒæ”¹è®Š Zsh åœ¨è‡ªå‹•è£œé½Šçš„é è¨­è¡Œç‚ºï¼›å®ƒä¸»è¦å¢å¼·å’Œè‡ªå®šç¾©æç¤ºç¬¦çš„å¤–è§€ã€‚è‡ªå‹•è£œé½Šçš„è¡Œç‚ºä¸»è¦ç”± Zsh é…ç½®æ§åˆ¶ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨ Zsh çš„è‡ªå‹•è£œé½Šå•Ÿç”¨å»ºè­°ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>zsh-autosuggestions</code> å¤–æ›ã€‚è©²å¤–æ›æä¾›é¡ä¼¼ fish çš„æç¤ºï¼Œèˆ‡ Powerlevel10k é…åˆä½¿ç”¨æ•ˆæœå¾ˆå¥½ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®‰è£å’Œé…ç½® <code>zsh-autosuggestions</code> çš„æ­¥é©Ÿï¼š</p>
<ol>
<li>
<p><strong>å®‰è£ zsh-autosuggestionsï¼š</strong></p>
<p>ä½ å¯ä»¥ä½¿ç”¨ä½ å–œæ­¡çš„æ–¹æ³•å®‰è£å®ƒã€‚ä¸€å€‹å¸¸è¦‹çš„æ–¹æ³•æ˜¯é€éå¤–æ›ç®¡ç†å™¨ï¼Œæ¯”å¦‚ <code>oh-my-zsh</code>ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨ <code>oh-my-zsh</code>ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹å‹•å…‹éš†å€‰åº«ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
</span></span></code></pre></div></li>
<li>
<p><strong>å•Ÿç”¨ zsh-autosuggestionsï¼š</strong></p>
<p>æ›´æ–°ä½ çš„ <code>~/.zshrc</code> æª”æ¡ˆä»¥å•Ÿç”¨è©²å¤–æ›ã€‚åœ¨ <code>plugins</code> è¡Œä¸­æ–°å¢æˆ–ä¿®æ”¹ <code>zsh-autosuggestions</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">plugins</span><span class="o">=(</span>zsh-autosuggestions<span class="o">)</span>
</span></span></code></pre></div></li>
<li>
<p><strong>é‡å•Ÿ Zsh æˆ–é‡æ–°è¼‰å…¥é…ç½®ï¼š</strong></p>
<p>é‡æ–°å•Ÿå‹•ä½ çš„ Terminalï¼Œæˆ–è€…åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æ‡‰ç”¨æ›´æ”¹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">source</span> ~/.zshrc
</span></span></code></pre></div></li>
</ol>
<p>ç¾åœ¨ï¼Œç•¶ä½ éµå…¥æ™‚ï¼Œä½ æ‡‰è©²æœƒçœ‹åˆ°åŸºæ–¼ä½ çš„å‘½ä»¤æ­·å²çš„è‡ªå‹•å»ºè­°ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ç‚º GitHub Pages ç¶²ç«™è¨­å®šè‡ªè¨‚ç¶²åŸŸ</title>
      <link>https://blog.cmwang.net/zh/posts/2023/10/custom-domain-for-github-pages/</link>
      <pubDate>Fri, 13 Oct 2023 14:02:18 +0800</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2023/10/custom-domain-for-github-pages/</guid>
      <description>é€™ç¯‡æ–‡ç« è¨˜éŒ„å¦‚ä½•ç‚º Github Page è¨­å®šè‡ªè¨‚ç¶²åŸŸï¼Œä»¥ Godaddy ç‚ºä¾‹</description>
      <content:encoded><![CDATA[<p>åœ¨ Github pages ä¸Šè¨­å®š CNAME ä¸ç”¨é¡å¤–ä»˜è²»ï¼Œåªæ˜¯ä½ éœ€è¦å…ˆæ“æœ‰ä¸€å€‹ç§äººåŸŸåã€‚é€™é‚Šå‡å®šæˆ‘å€‘å·²ç¶“åœ¨ <a href="https://www.godaddy.com/">Godaddy</a> è³¼è²·äº†åŸŸåï¼Œæ‰€ä»¥å…ˆåˆ° <a href="https://sg.godaddy.com/help/manage-dns-records-680">Godaddy DNS è¨­å®šé é¢</a>è¨­å®šã€‚</p>
<ol>
<li>å…ˆé€é Terminal æŸ¥è©¢ Github çš„ IP åœ°å€ã€‚</li>
</ol>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            dig {Your Domain}.github.io
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">dig xxxx.github.io
</span></span></code></pre></div></div>
</div>
<br />

<p><img loading="lazy" src="4.png" alt="dig"  />
</p>
<ol start="2">
<li>åˆ° Godaddy DNS é é¢è¨­å®š 4 å€‹ <code>A Record</code>ï¼Œ1 å€‹ <code>CNAME Record</code>ï¼Œè«‹åƒè€ƒåœ–ç‰‡ã€‚</li>
</ol>
<p><img loading="lazy" src="3.png" alt="godaddy setting"  />
</p>
<ol start="3">
<li>åœ¨ç§äººå­˜å„²åº«ä¸­æ·»åŠ  <code>CNAME</code> æ–‡ä»¶ï¼Œå…§å®¹ç‚º <code>xxx.{Domain Name}</code>ï¼Œä¾‹å¦‚ <code>blog.xxx.com</code>ã€‚</li>
</ol>
<p><img loading="lazy" src="5.png" alt="CNAME File"  />
</p>
<ol start="4">
<li>åœ¨é é¢å…§è¨­å®š CNAME ä¸¦æ‰“å‹¾ <code>Enforce HTTPS</code>ã€‚</li>
</ol>
<p><img loading="lazy" src="1.png" alt="github pages"  />

<img loading="lazy" src="2.png" alt="custom domain setting"  />
</p>
<p>éœ€è¦ä¸€é»æ™‚é–“æ‰æœƒç”Ÿæ•ˆï¼Œå¦‚æœä¸€åˆ‡éƒ½æ­£å¸¸ï¼Œç¬¬å››æ­¥é©Ÿçš„ DNS Check æ‡‰è©²æœƒé€šéã€‚</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">Managing a custom domain for your GitHub Pages site</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Hugo éƒ¨ç½²æŒ‡å—</title>
      <link>https://blog.cmwang.net/zh/posts/2023/10/hugo-deployment-guide/</link>
      <pubDate>Tue, 10 Oct 2023 20:01:46 +0800</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2023/10/hugo-deployment-guide/</guid>
      <description>é€™å€‹æŒ‡å—å°‡å¼•å°ä½ å®Œæˆåœ¨ GitHub ä¸Šå»ºç«‹ç§äººç¶²ç«™ä¸¦éƒ¨ç½²åˆ° GitHub Pages çš„éç¨‹</description>
      <content:encoded><![CDATA[<p>æ­¡è¿ä½¿ç”¨ Hugo å¿«é€Ÿå»ºç«‹å€‹äººç¶²ç«™ï¼é€™å€‹æŒ‡å—å°‡å¼•å°ä½ å®Œæˆåœ¨ GitHub ä¸Šå»ºç«‹ç§äººç¶²ç«™ä¸¦éƒ¨ç½²åˆ° GitHub Pages çš„éç¨‹ã€‚</p>
<h2 id="é€™å€‹æŒ‡å—åŒ…æ‹¬ä»€éº¼é‡é»">é€™å€‹æŒ‡å—åŒ…æ‹¬ä»€éº¼é‡é»</h2>
<ul>
<li><code>.gitignore</code>: æ’é™¤ç‰ˆæœ¬ç®¡ç†çš„æª”æ¡ˆ</li>
<li><code>.github/workflows/hugo.yml</code>: ä½¿ç”¨ GitHub Action å°‡ç§äºº Hugo å­˜æ”¾åº«éƒ¨ç½²åˆ°å…¬é–‹çš„ GitHub Pages å­˜æ”¾åº«ã€‚</li>
</ul>
<h2 id="æ­¥é©Ÿ">æ­¥é©Ÿ</h2>
<ol>
<li>
<p>åœ¨ <a href="https://github.com/">GitHub</a> å»ºç«‹ä¸€å€‹ç§äººå„²å­˜åº« <code>hugo-site</code> ä¾†ç®¡ç†ä½ çš„ç¶²ç«™åŸå§‹ç¢¼ï¼Œè«‹è¨˜å¾—åŒ…å« README.md æª”æ¡ˆã€‚</p>
</li>
<li>
<p>åœ¨ <a href="https://github.com/">GitHub</a> å»ºç«‹ä¸€å€‹å…¬é–‹å„²å­˜åº« <code>{YOUR_USER_NAME}.github.io</code> ä¾†ä¸Šå‚³ä½ çš„éœæ…‹ç¶²é åˆ° <a href="https://pages.github.com/">GitHub Pages</a>ã€‚</p>
</li>
<li>
<p>å°‡ <code>hugo-site</code> è¤‡è£½åˆ°æœ¬åœ°ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git clone https://github.com/<span class="o">{</span>YOUR_USER_NAME<span class="o">}</span>/hugo-site.git
</span></span></code></pre></div><p>æˆ–è€…ï¼Œå¦‚æœä½ å·²ç¶“ä½¿ç”¨äº† Git Submoduleï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¤‡è£½ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git clone --recursive https://github.com/<span class="o">{</span>YOUR_USER_NAME<span class="o">}</span>/hugo-site.git
</span></span></code></pre></div></li>
<li>
<p>åœ¨ <code>hugo-site</code> çš„åŒä¸€å±¤ç›®éŒ„å‰µå»º Hugo å°ˆæ¡ˆï¼ˆä¸è¦æ”¾åœ¨ <code>hugo-site</code> è£¡é¢ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">hugo new site hugo-site --force --format yaml
</span></span></code></pre></div></li>
<li>
<p>æ–°å¢ç¯„ä¾‹ä¸»é¡Œï¼Œé€™é‚Šä»¥ PaperMod ç‚ºä¾‹ï¼š</p>
</li>
</ol>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            Add theme
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> hugo-site
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">git submodule add --depth<span class="o">=</span><span class="m">1</span> https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;theme : &#39;PaperMod&#39;&#34;</span> &gt;&gt; hugo.yaml
</span></span></code></pre></div></div>
</div>
<br />

<ol start="6">
<li>
<p>å°‡ <a href="https://raw.githubusercontent.com/taka-wang/example-hugo-site/main/.gitignore">.gitignore</a> æª”æ¡ˆè¤‡è£½åˆ° <code>hugo-site</code>ã€‚</p>
</li>
<li>
<p>[å¯é¸] æ–°å¢ GitHub Action è‡ªå‹•éƒ¨ç½²ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> mkdir -p .github/workflows/
</span></span><span class="line"><span class="cl"> touch .github/workflows/hugo.yml
</span></span></code></pre></div><p>å°‡ <a href="https://raw.githubusercontent.com/taka-wang/example-hugo-site/main/.github/workflows/hugo.yml">hugo.yml</a> çš„å…§å®¹è¤‡è£½åˆ°ä¸Šè¿°æ–°å¢çš„ç©ºç™½ <code>hugo.yml</code>ã€‚è«‹è¨˜å¾—ä¿®æ”¹ä»¥ä¸‹å…©è™•ï¼š</p>
<ul>
<li><strong>token: ${{ secrets.ACCESS_TOKEN }}</strong>: åœ¨é€™è£¡ä½¿ç”¨ç§äººå„²å­˜åº«çš„å­˜å–æ¬Šæ–ï¼ˆAccess Tokenï¼‰ã€‚</li>
<li><strong>repository-name: YOUR_USER_NAME/YOUR_USER_NAME.github.io</strong>: å°‡ <code>YOUR_USER_NAME</code> æ”¹ç‚ºä½ çš„ GitHub å¸³è™Ÿåç¨±ã€‚</li>
</ul>
</li>
<li>
<p>æ¸¬è©¦ Hugo ç¶²ç«™ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">hugo server -D
</span></span></code></pre></div></li>
<li>
<p>é–‹å§‹å‰µå»ºè‡ªå·±çš„æ–‡ç« ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">hugo new posts/20231006/index.md
</span></span></code></pre></div><p>åœ¨ <code>content/posts/20231006</code> è£¡é¢çš„ <code>index.md</code> é–‹å§‹æ’°å¯«ï¼Œä¸¦å°‡åœ–ç‰‡æ”¾åœ¨åŒä¸€å€‹è³‡æ–™å¤¾ã€‚</p>
</li>
<li>
<p>æ­å–œä½ ï¼Œå·²ç¶“å®Œæˆç§äººå„²å­˜åº«çš„è¨­å®šï¼Œè«‹ä¸è¦å¿˜è¨˜å°‡è®Šæ›´æäº¤åˆ°ç§äººå„²å­˜åº«ã€‚</p>
</li>
</ol>
<h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™</h2>
<ul>
<li><a href="https://github.com/JamesIves/github-pages-deploy-action/issues/624#issuecomment-791982883">å¦‚ä½•è¨­å®š ACCESS Token</a></li>
<li><a href="https://blog.euc-rt.me/post/github-actions-publish-private-hugo-repo-to-public-pages-site/">ä½¿ç”¨ GitHub Actions å°‡ Hugo ç¶²ç«™å¾ç§äººå„²å­˜åº«ç™¼ä½ˆåˆ°å…¬é–‹é é¢</a></li>
<li><a href="https://2ndbrain.cc/posts/2021/04/get-started-hugo/">Hugo æ•™å­¸ &ndash; åŸºç¤ç¯‡</a></li>
<li><a href="https://gohugo.io/getting-started/quick-start/">å­¸ç¿’åœ¨å¹¾åˆ†é˜å…§å‰µå»º Hugo ç¶²ç«™ã€‚</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•å®‰è£ Hugo ç’°å¢ƒ</title>
      <link>https://blog.cmwang.net/zh/posts/2023/10/how-to-install-hugo/</link>
      <pubDate>Tue, 10 Oct 2023 19:41:05 +0800</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2023/10/how-to-install-hugo/</guid>
      <description>é€™ç¯‡æ–‡ç« æœƒä»‹ç´¹å¦‚ä½•å®‰è£ Hugo ç’°å¢ƒ</description>
      <content:encoded><![CDATA[<h2 id="macos">MacOS</h2>
<p>é€é <code>Homebrew</code> Package Manager å®‰è£æ˜¯æœ€æ–¹ä¾¿çš„</p>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            Install Packages with Homebrew on macOS
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># install homebrew</span>
</span></span><span class="line"><span class="cl">/bin/bash -c <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># install hugo</span>
</span></span><span class="line"><span class="cl">brew install hugo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># verify hugo installation</span>
</span></span><span class="line"><span class="cl">hugo version
</span></span><span class="line"><span class="cl">&gt; hugo v0.119.0-b84644c008e0dc2c4b67bd69cccf87a41a03937e+extended darwin/amd64 <span class="nv">BuildDate</span><span class="o">=</span>2023-09-24T15:20:17Z <span class="nv">VendorInfo</span><span class="o">=</span>brew
</span></span></code></pre></div></div>
</div>
<br />

<h2 id="windows">Windows</h2>
<p>ä»¥å·¥ä½œç®¡ç†å“¡é–‹å•Ÿ <strong>powershell</strong>
<code>win + x</code> æ¸¸æ¨™ä¸Šä¸‹é¸æ“‡åˆ° windows powershell (å·¥ä½œç®¡ç†å“¡)ï¼Œè¨˜å¾—è¦é¸æ“‡<code>è¶…ç´šç®¡ç†å“¡</code>çš„æ¬Šé™ã€‚</p>
<p>ç¢ºèªåŸ·è¡Œæ¬Šé™ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Get-ExecutionPolicy
</span></span></code></pre></div><p>å¦‚æœé¡¯ç¤º <strong>Ristricted</strong>ï¼Œå‰‡å†åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Set-ExecutionPolicy AllSigned
</span></span></code></pre></div><p>å®‰è£ chocolateyï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Set-ExecutionPolicy Bypass -Scope Process -Force<span class="p">;</span> iex <span class="o">((</span>New-Object System.Net.WebClient<span class="o">)</span>.DownloadString<span class="o">(</span><span class="s1">&#39;https://chocolatey.org/install.ps1&#39;</span><span class="o">))</span>
</span></span></code></pre></div><p>ç¢ºèªæ˜¯å¦å®‰è£å®Œæˆï¼Œåœ¨ <strong>powershell</strong> è¼¸å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">choco
</span></span><span class="line"><span class="cl"><span class="c1"># å¦‚æœæœ‰æ­£å¸¸å›è¦†ï¼Œå³å®‰è£å®Œæˆ</span>
</span></span></code></pre></div><p>æ¥è‘—å°±å¯ä»¥é€é choco å®‰è£ hugo å›‰ï¼ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            Install Packages with Chocolatey on Windows
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># install hugo</span>
</span></span><span class="line"><span class="cl">choco install hugo-extended
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># verify hugo installation</span>
</span></span><span class="line"><span class="cl">hugo version
</span></span><span class="line"><span class="cl">&gt; hugo v0.119.0-b84644c008e0dc2c4b67bd69cccf87a41a03937e...
</span></span></code></pre></div></div>
</div>
<br />

<hr>
<h2 id="references">References</h2>
<ul>
<li><a href="https://gohugo.io/installation/macos/">Install Hugo on macOS</a></li>
<li><a href="https://gohugo.io/installation/windows/">Install Hugo on Windows</a></li>
<li><a href="https://blog.darkthread.net/blog/choco-install-notes-for-new-windows/">æˆ‘çš„ Windows æ–°è£æ©Ÿ Chocolatey å®‰è£æ¸…å–®</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ¨¡æ“¬å¥§é‹äº”ç’°ç„¡äººæ©Ÿç‡ˆå…‰ç§€</title>
      <link>https://blog.cmwang.net/zh/posts/2022/03/simulated-olympic-rings-drone-light-show/</link>
      <pubDate>Sat, 19 Mar 2022 12:37:27 +0000</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2022/03/simulated-olympic-rings-drone-light-show/</guid>
      <description>ç·´ç¿’ CALayer &amp;amp; Gesture Recognizer@</description>
      <content:encoded><![CDATA[<p><strong>å­¸ç¿’ç›®æ¨™ï¼š</strong></p>
<ul>
<li>Gesture Recognizer</li>
<li>CALayer &amp; UIBezierPath</li>
<li>Class &amp; Function</li>
</ul>
<p><strong>ç·´ç¿’æˆæœï¼š</strong></p>
<p><img loading="lazy" src="images/1.gif" alt="image"  />
</p>
<p><strong>åŸå§‹ç¢¼ï¼š</strong></p>
<p><a href="https://github.com/takawang/olympic-drone">GitHub - takawang/olympic-drone</a></p>
<p><strong>ç·£èµ·ï¼š</strong></p>
<p>é€™æ¬¡çš„ç·´ç¿’ï¼Œä¸»è¦æ˜¯çœ‹åˆ°ä¸‹é¢é€™ç¯‡æ–‡ç« çš„å•Ÿç™¼ï¼Œä¸éæˆ‘ç°¡åŒ–äº†è§¸æ¨¡æ•£é–‹èˆ‡åŠ é€Ÿåº¦é€™å€‹éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯ç·´ç¿’ swift å¯¦ä½œã€‚</p>
<p><a href="https://velog.io/@heekang/Vanilla-JS-%ED%8F%89%EC%B0%BD%EC%98%AC%EB%A6%BC%ED%94%BD-%EB%93%9C%EB%A1%A0%EC%87%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0">[Vanilla JS] í‰ì°½ì˜¬ë¦¼í”½ ë“œë¡ ì‡¼ ë§Œë“¤ê¸°</a></p>
<p><strong>èªªæ˜ï¼š</strong></p>
<p>å¯¦ä½œçš„æ§‹æƒ³é‚„ç®—ç›´è¦ºï¼Œé™¤äº†<strong>é•·å£“é€£çºŒè§¸ç™¼</strong>éœ€è¦ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<ol>
<li>ä½¿ç”¨ javascript çš„ <strong>canvas getImageData()</strong> å°‡ SVG å­˜æˆ json æª” (å¯åƒè€ƒä¸Šæ–‡é€£çµä¸­çš„ <strong>getDotPos</strong> æ–¹æ³•ã€‚</li>
<li>åœ¨ swift ä¸­ï¼Œé€éè®€å– json æª”ï¼Œå­˜æˆåº§æ¨™é»çš„é¡åˆ¥é™£åˆ—ï¼Œé€™å…©æ­¥é©Ÿä¹Ÿå¯ä»¥ç”¨ä¾†ç•«å…¶ä»–åœ–æ¡ˆï¼Œä¸ç”¨æ‰‹å·¥ä¸€ç›´æé»ã€‚</li>
</ol>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            load all points from json file
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">import</span> <span class="nc">UIKit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Point definition for json object</span>
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Point</span><span class="p">:</span> <span class="n">Decodable</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nv">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">Int</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nv">color</span><span class="p">:</span> <span class="nb">String</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// load all points from json file.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ref: https://stackoverflow.com/a/50042872</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ref: https://praveenkommuri.medium.com/how-to-read-parse-local-json-file-in-swift-28f6cec747cf</span>
</span></span><span class="line"><span class="cl">  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">loadFromJson</span><span class="p">(</span><span class="n">fileName</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="p">[</span><span class="n">Point</span><span class="p">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">do</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">guard</span> <span class="kd">let</span> <span class="nv">filePath</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">path</span><span class="p">(</span><span class="n">forResource</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="n">ofType</span><span class="p">:</span> <span class="s">&#34;json&#34;</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nv">fileUrl</span> <span class="p">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">fileURLWithPath</span><span class="p">:</span> <span class="n">filePath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="k">try</span> <span class="n">Data</span><span class="p">(</span><span class="n">contentsOf</span><span class="p">:</span> <span class="n">fileUrl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nv">points</span> <span class="p">=</span> <span class="k">try</span> <span class="n">JSONDecoder</span><span class="p">().</span><span class="n">decode</span><span class="p">([</span><span class="n">Point</span><span class="p">].</span><span class="kc">self</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">points</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// should not happen!</span>
</span></span><span class="line"><span class="cl">      <span class="bp">print</span><span class="p">(</span><span class="s">&#34;Something went wrong: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div></div>
</div>
<br />

<ol start="3">
<li>è¨­è¨ˆ Drone é¡åˆ¥ï¼Œè®“ Drone <strong>åˆå§‹ä½ç½®</strong>æ˜¯éš¨æ©Ÿçš„ï¼Œ<strong>ç›®çš„ä½ç½®</strong>æ˜¯å‰›å‰›è¼‰å…¥çš„åœ–å½¢åº§æ¨™ã€‚</li>
<li>å°‡å…©åº§æ¨™åˆ†æˆ 20 ä»½ï¼ŒæŒçºŒæŒ‰å£“é€£çºŒè§¸ç™¼æ™‚ï¼Œä¸€æ¬¡ç§»å‹•ä¸€ä»½ã€‚</li>
<li>ç•¶åˆ°é”ç›®çš„åº§æ¨™æ™‚ï¼Œæ”¹è®Š Drone çš„é¡è‰²ã€‚</li>
</ol>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            handle long press event
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">import</span> <span class="nc">UIKit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nv">touchCountTimer</span><span class="p">:</span> <span class="n">Timer</span><span class="p">?</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nv">touchBeginTime</span><span class="p">:</span> <span class="nb">Double</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nv">droneCollection</span> <span class="p">=</span> <span class="n">DroneCollectionController</span><span class="p">(</span><span class="n">fromJsonFile</span><span class="p">:</span> <span class="s">&#34;ring&#34;</span><span class="p">)</span> <span class="c1">// composition</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">droneCollection</span><span class="p">.</span><span class="n">attachToLayer</span><span class="p">(</span><span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">layer</span><span class="p">)</span> <span class="c1">// attach drone layer</span>
</span></span><span class="line"><span class="cl">    <span class="n">addLongPressGesture</span><span class="p">()</span> <span class="c1">// handle press</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// register gesture recognizer</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ref: [How can i count time on long-pressed button using UILongPressGestureRecognizer](https://stackoverflow.com/a/53146530)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">func</span> <span class="nf">addLongPressGesture</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">longPress</span> <span class="p">=</span> <span class="n">UILongPressGestureRecognizer</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="n">longPress</span><span class="p">(</span><span class="n">gesture</span><span class="p">:)))</span>
</span></span><span class="line"><span class="cl">    <span class="n">longPress</span><span class="p">.</span><span class="n">minimumPressDuration</span> <span class="p">=</span> <span class="mf">0.1</span>
</span></span><span class="line"><span class="cl">    <span class="n">longPress</span><span class="p">.</span><span class="n">numberOfTouchesRequired</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addGestureRecognizer</span><span class="p">(</span><span class="n">longPress</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// handle long press event</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ref: [How can i count time on long-pressed button using UILongPressGestureRecognizer](https://stackoverflow.com/a/53146530)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">longPress</span><span class="p">(</span><span class="n">gesture</span><span class="p">:</span> <span class="n">UILongPressGestureRecognizer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="n">gesture</span><span class="p">.</span><span class="n">state</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="n">UIGestureRecognizer</span><span class="p">.</span><span class="n">State</span><span class="p">.</span><span class="n">began</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">touchCountTimer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">scheduledTimer</span><span class="p">(</span><span class="n">withTimeInterval</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="kc">self</span><span class="p">]</span> <span class="p">(</span><span class="n">timer</span><span class="p">)</span> <span class="k">in</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> - do animation</span>
</span></span><span class="line"><span class="cl">        <span class="n">droneCollection</span><span class="p">.</span><span class="n">animation</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="n">touchBeginTime</span> <span class="p">=</span> <span class="n">Date</span><span class="p">().</span><span class="n">timeIntervalSince1970</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="p">.</span><span class="n">ended</span><span class="p">,</span> <span class="p">.</span><span class="n">failed</span><span class="p">,</span> <span class="p">.</span><span class="n">cancelled</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">touchCountTimer</span><span class="p">?.</span><span class="n">invalidate</span><span class="p">()</span> <span class="c1">// Stops the timer</span>
</span></span><span class="line"><span class="cl">      <span class="n">DroneCollectionController</span><span class="p">.</span><span class="n">isArrived</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="p">.</span><span class="n">changed</span><span class="p">:</span> <span class="c1">// wipe</span>
</span></span><span class="line"><span class="cl">      <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="bp">print</span><span class="p">(</span><span class="s">&#34;unknown&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div></div>
</div>
<br />

]]></content:encoded>
    </item>
    
    <item>
      <title>iPadä¸Šçš„å½±ç‰‡æ’­æ”¾å™¨</title>
      <link>https://blog.cmwang.net/zh/posts/2022/03/practice-avplayer-view-controller/</link>
      <pubDate>Wed, 16 Mar 2022 10:32:00 +0000</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2022/03/practice-avplayer-view-controller/</guid>
      <description>ç·´ç¿’ä½¿ç”¨ AVPlayerViewController è£½ä½œå‹•æ…‹å­—å¹•å½±ç‰‡</description>
      <content:encoded><![CDATA[<p><strong>å­¸ç¿’ç›®æ¨™ï¼š</strong></p>
<ul>
<li>AVPlayer</li>
<li>NotificationCenter</li>
<li>Timer</li>
<li>Swift Optional</li>
<li>Function</li>
<li>Switch Case</li>
</ul>
<p><strong>ç·´ç¿’æˆæœï¼š</strong></p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/qnXX_HtG1sw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p><strong>åŸå§‹ç¢¼ï¼š</strong></p>
<p><a href="https://github.com/takawang/letter-song">GitHub - takawang/letter-song</a></p>
<p><strong>æ­Œè©ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ä»Šæ™š æˆ‘æƒ³å°‡é‚£å¤©çš„è¢ç«
</span></span><span class="line"><span class="cl">é€åˆ°ä½ çš„çª—å‰
</span></span><span class="line"><span class="cl">å«æ„æ˜¯&#34;æˆ‘æ„›ä½ &#34;
</span></span><span class="line"><span class="cl">æˆ‘æƒ³èµ·æˆ‘å€‘çš„åˆå»
</span></span><span class="line"><span class="cl">ä¸ç®¡ä½•æ™‚ åªè¦é–‰ä¸Šé›™çœ¼
</span></span><span class="line"><span class="cl">å°±èƒ½å¥”å‘é‚£æœ€é™é çš„åœ°æ–¹
</span></span><span class="line"><span class="cl">å°±åƒæˆ‘åœ¨è¢«æµªæ¿¤æ¹§ä¾†çš„æ²™ä¸Šå¯«ä¸‹çš„å­—è·¡èˆ¬
</span></span><span class="line"><span class="cl">ä½ æ„Ÿè¦ºä¹Ÿæœƒåƒä»–å€‘é‚£æ¨£å¾æ­¤æ¶ˆå¤±
</span></span><span class="line"><span class="cl">ç¸½æ˜¯æƒ³å¿µ
</span></span><span class="line"><span class="cl">é›–ç„¶ç„¡æ³•å°‡æˆ‘å¿ƒè£¡æ‰€æœ‰çš„è©±èªï¼Œèªªçµ¦ä½ è½
</span></span><span class="line"><span class="cl">ä½†é‚£è£¡é ­ï¼Œå…¨éƒ½æ˜¯&#34;æˆ‘æ„›ä½ &#34;
</span></span><span class="line"><span class="cl">æˆ‘ä½•å¾·ä½•èƒ½
</span></span><span class="line"><span class="cl">èƒ½æ“æœ‰åç‚ºä½ çš„é€™ä»½å¹¸é‹
</span></span><span class="line"><span class="cl">è‹¥æˆ‘å€‘ç¾åœ¨èƒ½æœ›è‘—å°æ–¹
</span></span><span class="line"><span class="cl">è©²æœ‰å¤šç¾å¥½
</span></span><span class="line"><span class="cl">å°±åƒæˆ‘åœ¨è¢«æµªæ¿¤æ¹§ä¾†çš„æ²™ä¸Šå¯«ä¸‹çš„å­—è·¡èˆ¬
</span></span><span class="line"><span class="cl">ä½ æ„Ÿè¦ºä¹Ÿæœƒåƒä»–å€‘é‚£æ¨£å¾æ­¤æ¶ˆå¤±
</span></span><span class="line"><span class="cl">é‚„æ˜¯æƒ³å¿µ
</span></span><span class="line"><span class="cl">é›–ç„¶ç„¡æ³•å°‡æˆ‘å¯«åœ¨æ—¥è¨˜ä¸Šçš„ä¸€å­—ä¸€å¥
</span></span><span class="line"><span class="cl">éƒ½å‘Šè¨´ä½ 
</span></span><span class="line"><span class="cl">ä½†å­—å­—å¥å¥éƒ½ä»£è¡¨è‘—æˆ‘æ„›ä½ 
</span></span><span class="line"><span class="cl">ä»Šæ™š æˆ‘æƒ³å°‡é‚£å¤©çš„è¢ç«
</span></span><span class="line"><span class="cl">é€åˆ°ä½ çš„çª—å‰
</span></span><span class="line"><span class="cl">å¸Œæœ›ä»Šå¤œçš„ä½ æœ‰å€‹ç¾å¥½çš„å¤¢
</span></span></code></pre></div><p><strong>å½±ç‰‡ä¾†æºï¼š</strong><a href="https://www.youtube.com/watch?v=BzYnNdJhZQw">https://www.youtube.com/watch?v=BzYnNdJhZQw</a></p>
<p><strong>æ­Œè©ä¾†æºï¼š</strong><a href="https://tinyurl.com/2p9c5d8a">https://tinyurl.com/2p9c5d8a</a></p>
<p><strong>Storyboard:</strong></p>
<p><img loading="lazy" src="images/1.png" alt="image"  />
</p>
<hr>
<p><strong>éç¨‹ï¼š</strong></p>
<p>æœ¬æ¬¡çµåˆå¹¾å€‹é …ç›®ï¼Œç·´ç¿’ SDK ä½¿ç”¨èˆ‡ç†Ÿæ‚‰ Swift èªæ³•ï¼Œåªç”¨ function print ç„¡æ³•æ»¿è¶³è‡ªå·±çš„æœŸå¾…ï¼Œæ‰€ä»¥ä¸Šç¶²æŸ¥äº†ä¸€äº›è³‡æ–™ä¸¦æ­é…ä¸Šèª²å…§å®¹è£½ä½œï¼Œå°‡ AVPlayerViewController åŠ é€² UIView æ‡‰è©²æ˜¯æœ€å›°é›£çš„éƒ¨åˆ†ï¼ŒåŸæœ¬è€ƒæ…®ä½¿ç”¨ Container View å»åšï¼Œä½†é‚„ä¸çŸ¥é“æ€éº¼æ§åˆ¶å¤šå€‹ Controllerï¼Œä¸¦ä¸”è·Ÿ Storyboard ä¸²æ¥èµ·ä¾†ã€‚</p>
<p>ä¸»è¦åœ¨ <strong>iPad Pro 12.9</strong> èˆ‡ <strong>iPad Mini 6</strong> å¯¦æ©Ÿæ¸¬è©¦éï¼ŒiPhone ç‰ˆé¢æœƒçœ‹ä¸åˆ°æ­Œè©ã€‚</p>
<ol>
<li>æ–°å¢ UIViewï¼Œå–å¾— IBOutlet -&gt; Line 12</li>
<li>å°‡ AVPlayerViewController åŠ é€² UIView -&gt; Line 50</li>
<li>ç”¨ IBAction æ§åˆ¶ å½±ç‰‡æ’­æ”¾ä¸¦é–‹å§‹è¨ˆæ™‚ -&gt; Line59</li>
<li>è¨»å†Š View ç”Ÿå‘½é€±æœŸèˆ‡å½±ç‰‡æ’­æ”¾çµæŸçš„é€šçŸ¥ -&gt; Line 20~28</li>
</ol>


<div class="terminal space shadow">
    <div class="top">
        <div class="btns">
            <span class="circle red"></span>
            <span class="circle yellow"></span>
            <span class="circle green"></span>
        </div>
        <div class="title">
            Partial script
        </div>
    </div>
    <div class="terminalbody"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">import</span> <span class="nc">AVFoundation</span>
</span></span><span class="line"><span class="cl"><span class="kd">import</span> <span class="nc">AVKit</span>
</span></span><span class="line"><span class="cl"><span class="kd">import</span> <span class="nc">UIKit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">lyricsLabel</span><span class="p">:</span> <span class="n">UILabel</span><span class="p">!</span>
</span></span><span class="line"><span class="cl">  <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">videoView</span><span class="p">:</span> <span class="n">UIView</span><span class="p">!</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nv">player</span><span class="p">:</span> <span class="n">AVPlayer</span><span class="p">?</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nv">timer</span><span class="p">:</span> <span class="n">Timer</span><span class="p">?</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nv">counter</span> <span class="p">=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nv">isPlaying</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// listen to active and resign notifications</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ref: https://stackoverflow.com/a/45955660</span>
</span></span><span class="line"><span class="cl">    <span class="n">NotificationCenter</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">openAndCloseActivity</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                                           <span class="n">name</span><span class="p">:</span> <span class="n">UIApplication</span><span class="p">.</span><span class="n">didBecomeActiveNotification</span><span class="p">,</span> <span class="n">object</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">NotificationCenter</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">openAndCloseActivity</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                                           <span class="n">name</span><span class="p">:</span> <span class="n">UIApplication</span><span class="p">.</span><span class="n">willResignActiveNotification</span><span class="p">,</span> <span class="n">object</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// listen to end play notification</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ref: https://www.tutorialspoint.com/how-to-use-swift-to-detect-when-avplayer-video-ends-playing</span>
</span></span><span class="line"><span class="cl">    <span class="n">NotificationCenter</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">videoDidEnd</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                                           <span class="n">name</span><span class="p">:</span> <span class="n">NSNotification</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">AVPlayerItemDidPlayToEndTime</span><span class="p">,</span> <span class="n">object</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// setup avplayer controller</span>
</span></span><span class="line"><span class="cl">    <span class="n">initVideoView</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// setup avplayer controller</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// add avplayer controller to the current view and hide playback controls</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="kd">func</span> <span class="nf">initVideoView</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ref: https://medium.com/@nabilsafatli/how-to-create-a-custom-control-for-avplayer-1e53b9188ae3</span>
</span></span><span class="line"><span class="cl">    <span class="k">guard</span> <span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">url</span><span class="p">(</span><span class="n">forResource</span><span class="p">:</span> <span class="s">&#34;night&#34;</span><span class="p">,</span> <span class="n">withExtension</span><span class="p">:</span> <span class="s">&#34;mp4&#34;</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kc">self</span><span class="p">.</span><span class="n">player</span> <span class="p">=</span> <span class="n">AVPlayer</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//player!.rate = 1 //auto play</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">playerFrame</span> <span class="p">=</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="n">videoView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="n">videoView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">playerViewController</span> <span class="p">=</span> <span class="n">AVPlayerViewController</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">playerViewController</span><span class="p">.</span><span class="n">player</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">player</span>
</span></span><span class="line"><span class="cl">    <span class="n">playerViewController</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">playerFrame</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">addChild</span><span class="p">(</span><span class="n">playerViewController</span><span class="p">)</span> <span class="c1">// add player controller to view controller</span>
</span></span><span class="line"><span class="cl">    <span class="n">videoView</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">playerViewController</span><span class="p">.</span><span class="n">view</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">playerViewController</span><span class="p">.</span><span class="n">didMove</span><span class="p">(</span><span class="n">toParent</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">playerViewController</span><span class="p">.</span><span class="n">showsPlaybackControls</span> <span class="p">=</span> <span class="kc">false</span> <span class="c1">// hide playback controls</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// handle play click event</span>
</span></span><span class="line"><span class="cl">  <span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">playVideo</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="n">UIButton</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">!</span><span class="kc">self</span><span class="p">.</span><span class="n">isPlaying</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">isPlaying</span> <span class="p">=</span> <span class="kc">true</span> <span class="c1">// set flag</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">counter</span> <span class="p">=</span> <span class="mf">0.0</span> <span class="c1">// init counter</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">player</span><span class="p">?.</span><span class="n">seek</span><span class="p">(</span><span class="n">to</span><span class="p">:</span> <span class="n">CMTime</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">CMTimeValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="n">timescale</span><span class="p">:</span> <span class="mi">1000</span><span class="p">))</span> <span class="c1">// seek to head</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// init timer.</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ref: https://medium.com/å½¼å¾—æ½˜çš„-swift-ios-app-é–‹ç™¼æ•™å®¤/é€é-timer-è¨­å®šæ¯å¹¾ç§’é‡è¤‡åŸ·è¡Œ-function-3c80f449107</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">scheduledTimer</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">timeInterval</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="n">updateLyrics</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">userInfo</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// play video</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">player</span><span class="p">?.</span><span class="n">play</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="bp">print</span><span class="p">(</span><span class="s">&#34;already playing, do nothing...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">updateLyrics</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kc">self</span><span class="p">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mf">0.1</span> <span class="c1">// increase counter</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="kc">self</span><span class="p">.</span><span class="n">counter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">5.0</span><span class="p">...</span><span class="mf">20.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;IU - å¤œä¿¡&#34;</span> <span class="c1">// 0</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">24.4</span><span class="p">...</span><span class="mf">37.4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä»Šæ™š  æˆ‘æƒ³å°‡é‚£å¤©çš„è¢ç«&#34;</span> <span class="c1">// 1</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">37.5</span><span class="p">...</span><span class="mf">47.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;é€åˆ°ä½ çš„çª—å‰&#34;</span> <span class="c1">// 2</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">49.6</span><span class="p">...</span><span class="mf">59.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;å«æ„æ˜¯ </span><span class="se">\&#34;</span><span class="s">æˆ‘æ„›ä½ </span><span class="se">\&#34;</span><span class="s">&#34;</span> <span class="c1">// 3</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">68.8</span><span class="p">...</span><span class="mf">80.8</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;æˆ‘æƒ³èµ·æˆ‘å€‘çš„åˆå»&#34;</span> <span class="c1">// 4</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">80.9</span><span class="p">...</span><span class="mf">90.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä¸ç®¡ä½•æ™‚ åªè¦é–‰ä¸Šé›™çœ¼&#34;</span> <span class="c1">// 5</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">93.1</span><span class="p">...</span><span class="mf">103.2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;å°±èƒ½å¥”å‘é‚£æœ€é™é çš„åœ°æ–¹&#34;</span> <span class="c1">// 6</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">105.7</span><span class="p">...</span><span class="mf">115.8</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;å°±åƒæˆ‘åœ¨è¢«æµªæ¿¤æ¹§ä¾†çš„æ²™ä¸Šå¯«ä¸‹çš„å­—è·¡èˆ¬&#34;</span> <span class="c1">// 7,8</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">115.9</span><span class="p">...</span><span class="mf">123.4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä½ æ„Ÿè¦ºä¹Ÿæœƒåƒä»–å€‘é‚£æ¨£å¾æ­¤æ¶ˆå¤±&#34;</span> <span class="c1">// 9</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">123.5</span><span class="p">...</span><span class="mf">127.4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ç¸½æ˜¯æƒ³å¿µ&#34;</span> <span class="c1">// 10</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">127.5</span><span class="p">...</span><span class="mf">141.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;é›–ç„¶ç„¡æ³•å°‡æˆ‘å¿ƒè£¡æ‰€æœ‰çš„è©±èª  èªªçµ¦ä½ è½&#34;</span> <span class="c1">// 11,12</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">141.2</span><span class="p">...</span><span class="mf">151.3</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä½†é‚£è£¡é ­å…¨éƒ½æ˜¯ </span><span class="se">\&#34;</span><span class="s">æˆ‘æ„›ä½ </span><span class="se">\&#34;</span><span class="s">&#34;</span> <span class="c1">// 13</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">160.1</span><span class="p">...</span><span class="mf">166.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;æˆ‘ä½•å¾·ä½•èƒ½&#34;</span> <span class="c1">// 14</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">166.1</span><span class="p">...</span><span class="mf">171.7</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;èƒ½æ“æœ‰åç‚ºä½ çš„é€™ä»½å¹¸é‹&#34;</span> <span class="c1">// 15</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">171.8</span><span class="p">...</span><span class="mf">176.8</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;è‹¥æˆ‘å€‘ç¾åœ¨èƒ½æœ›è‘—å°æ–¹&#34;</span> <span class="c1">// 16</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">176.9</span><span class="p">...</span><span class="mf">184.0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;è©²æœ‰å¤šç¾å¥½&#34;</span> <span class="c1">// 17</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">184.1</span><span class="p">...</span><span class="mf">194.1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;å°±åƒæˆ‘åœ¨è¢«æµªæ¿¤æ¹§ä¾†çš„æ²™ä¸Šå¯«ä¸‹çš„å­—è·¡èˆ¬&#34;</span> <span class="c1">// 18,19</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">194.2</span><span class="p">...</span><span class="mf">202.5</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä½ æ„Ÿè¦ºä¹Ÿæœƒåƒä»–å€‘é‚£æ¨£å¾æ­¤æ¶ˆå¤±&#34;</span> <span class="c1">// 20</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">202.6</span><span class="p">...</span><span class="mf">205.8</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;é‚„æ˜¯æƒ³å¿µ&#34;</span> <span class="c1">// 21</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">205.9</span><span class="p">...</span><span class="mf">212.1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;é›–ç„¶ç„¡æ³•å°‡æˆ‘å¯«åœ¨æ—¥è¨˜ä¸Šçš„ä¸€å­—ä¸€å¥&#34;</span> <span class="c1">// 22</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">212.2</span><span class="p">...</span><span class="mf">220.5</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;éƒ½å‘Šè¨´ä½ &#34;</span> <span class="c1">// 23</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">220.6</span><span class="p">...</span><span class="mf">226.4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä½†å­—å­—å¥å¥éƒ½ä»£è¡¨è‘—æˆ‘æ„›ä½ &#34;</span> <span class="c1">// 24</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">228.5</span><span class="p">...</span><span class="mf">241.9</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;ä»Šæ™š  æˆ‘æƒ³å°‡é‚£å¤©çš„è¢ç«&#34;</span> <span class="c1">// 25</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">242.0</span><span class="p">...</span><span class="mf">249.7</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;é€åˆ°ä½ çš„çª—å‰&#34;</span> <span class="c1">// 26</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="mf">255.9</span><span class="p">...</span><span class="mf">267.2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;å¸Œæœ›ä»Šå¤œçš„ä½ æœ‰å€‹ç¾å¥½çš„å¤¢&#34;</span> <span class="c1">// 27</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// handle vidie end notification</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ref: https://www.tutorialspoint.com/how-to-use-swift-to-detect-when-avplayer-video-ends-playing</span>
</span></span><span class="line"><span class="cl">  <span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">videoDidEnd</span><span class="p">(</span><span class="n">notification</span><span class="p">:</span> <span class="n">NSNotification</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;video ended&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kc">self</span><span class="p">.</span><span class="n">timer</span><span class="p">?.</span><span class="n">invalidate</span><span class="p">()</span> <span class="c1">// stop timer</span>
</span></span><span class="line"><span class="cl">    <span class="kc">self</span><span class="p">.</span><span class="n">isPlaying</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// handle activity resume and close</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ref: https://stackoverflow.com/a/45955660</span>
</span></span><span class="line"><span class="cl">  <span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">openAndCloseActivity</span><span class="p">(</span><span class="kc">_</span> <span class="n">notification</span><span class="p">:</span> <span class="n">Notification</span><span class="p">)</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">notification</span><span class="p">.</span><span class="n">name</span> <span class="p">==</span> <span class="n">UIApplication</span><span class="p">.</span><span class="n">didBecomeActiveNotification</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="bp">print</span><span class="p">(</span><span class="s">&#34;resume activity&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// seek to head</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">player</span><span class="p">?.</span><span class="n">seek</span><span class="p">(</span><span class="n">to</span><span class="p">:</span> <span class="n">CMTime</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">CMTimeValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="n">timescale</span><span class="p">:</span> <span class="mi">1000</span><span class="p">))</span> <span class="c1">// ref: https://stackoverflow.com/a/59839041</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="bp">print</span><span class="p">(</span><span class="s">&#34;close activity&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">player</span><span class="p">?.</span><span class="n">pause</span><span class="p">()</span> <span class="c1">// pause player</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">timer</span><span class="p">?.</span><span class="n">invalidate</span><span class="p">()</span> <span class="c1">// stop timer</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">isPlaying</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">      <span class="kc">self</span><span class="p">.</span><span class="n">lyricsLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div></div>
</div>
<br />

<p><strong>å…è²¬è²æ˜ï¼š</strong></p>
<p>å½±ç‰‡ä½¿ç”¨åªç‚ºäº†å­¸ç¿’ç›®çš„ï¼Œæ²’æœ‰ç‡Ÿåˆ©è¡Œç‚ºï¼Œç‰ˆæ¬Šå±¬æ–¼åŸå‰µä½œæ–¹ <a href="https://www.youtube.com/channel/UCweOkPb1wVVH0Q0Tlj4a5Pw">1theK</a>.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä»¿è£½ iPad ä¸Šçš„ Apple Music</title>
      <link>https://blog.cmwang.net/zh/posts/2022/03/replicate-apple-music-ipad-os-app/</link>
      <pubDate>Sun, 13 Mar 2022 11:35:11 +0000</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2022/03/replicate-apple-music-ipad-os-app/</guid>
      <description>ç·´ç¿’ä½¿ç”¨ Scroll View &amp;amp; Table View ä»¿è£½ iPad ä¸Šçš„ Apple Music App</description>
      <content:encoded><![CDATA[<p><strong>å­¸ç¿’ç›®æ¨™ï¼š</strong></p>
<ul>
<li>ç·´ç¿’ Scroll View</li>
<li>ç·´ç¿’ Navigation Controller</li>
<li>ç·´ç¿’ Table View Controller &amp; Static Cells</li>
<li>ç·´ç¿’ Label &amp; Button æ¨£å¼</li>
<li>ç·´ç¿’ segue &amp; SF Symbols</li>
</ul>
<p><strong>ç·´ç¿’æˆæœï¼š</strong></p>
<p><img loading="lazy" src="images/1.gif" alt="ç·´ç¿’æˆæœéŒ„å½±æˆªåœ–"  />
</p>
<p><a href="https://github.com/takawang/fake-music">GitHub - takawang/fake-music</a></p>
<p><strong>éç¨‹ï¼š</strong></p>
<p>é€éç›´æ¥æ“·å– iPad Pro 12.9 å¯¦æ©Ÿç•«é¢ï¼Œåœ¨ story board ä¸Šä»¿è£½ Apple Music ä¸Šçš„ IU å°ˆè¼¯é é¢ï¼Œæ›´é€²ä¸€æ­¥ç†Ÿæ‚‰äº† Navigation Controller çš„ä½¿ç”¨ï¼Œå› ç‚ºé‚„ä¸æœƒè£½ä½œç¬¦åˆå„ç¨®æ©Ÿå‹çš„ç‰ˆé¢ï¼Œæ‰€ä»¥å°±ç›´æ¥ hardcode åªæ”¯æ´ 12.9 æ°´å¹³çš„ç‰ˆé¢ï¼Œæ˜¯æœ‰é»å‘†ç‰ˆä½†ä¹Ÿæ”¶ç©«ä¸å°‘ã€‚</p>
<p><img loading="lazy" src="images/2.png" alt="image"  />

é™å®šåªæ”¯æ´ iPad èˆ‡ Landscape</p>
<p><img loading="lazy" src="images/3.png" alt="image"  />

ä¿®æ”¹ Product Name æ”¹è®Š APP åœ¨æ¡Œé¢çš„åç¨±</p>
<p>éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œåœ¨ story board ä¸Šçš„æ˜¯ pointï¼Œä½†è¢å¹•æˆªåœ–æ˜¯ pixelï¼Œå› ç‚ºæ²’æœ‰ zeplin ä¹‹é¡çš„è¨­è¨ˆç¨¿ï¼Œæ‰€ä»¥èŠ±æœ€å¤šæ™‚é–“é‚„æ˜¯åœ¨æŠ“å–èˆ‡å°é½Šåº§æ¨™ï¼Œä½ç½®ä¸æ˜¯ pixel perfectï¼Œä½†ç·´ç¿’çš„ç›®çš„æ‡‰è©²æ˜¯é”åˆ°äº†ã€‚</p>
<p><img loading="lazy" src="images/4.png" alt="image"  />

Point èˆ‡ pixel æ˜¯ 2x scale çš„é—œä¿‚</p>
<p><strong>æœ€è¿‘æ’­æ”¾</strong>çš„é»é¸ï¼Œåƒè€ƒä¸‹é¢æ–‡ç« ï¼ŒåŸæœ¬ä½¿ç”¨ <strong>tap gesture recognizer</strong>ï¼Œä¸éå¤§æ¦‚å› ç‚ºæˆ‘å°‡ navigation controller æ”¾éŒ¯åœ°æ–¹ï¼Œç¸½æ˜¯çœ‹ä¸åˆ° back é¸å–®ï¼Œæœ€å¾Œé¸æ“‡<strong>é€æ˜æŒ‰éˆ•ç–Šåœ¨ä¸Šæ–¹</strong>çš„åšæ³•ã€‚</p>
<p><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-segue-%E5%AF%A6%E7%8F%BE%E5%9C%96%E7%89%87%E9%BB%9E%E9%81%B8%E7%9A%84%E6%8F%9B%E9%A0%81%E5%8A%9F%E8%83%BD-84f6991d74d4">åˆ©ç”¨ segue å¯¦ç¾åœ–ç‰‡é»é¸çš„æ›é åŠŸèƒ½</a></p>
<p><img loading="lazy" src="images/5.png" alt="image"  />

Navigation Controller éœ€è¦å¾ç¬¬ä¸€å€‹ç•«é¢é•·å‡ºä¾†ï¼Œè€Œä¸æ˜¯ç¬¬äºŒé </p>
<p>ä¸»ç•«é¢æœ‰å…©å€‹ scoll viewï¼Œåƒè€ƒé€£çµæä¾›çš„æŠ€å·§å°±å¯ä»¥æ–¹ä¾¿è£½ä½œï¼Œè¨˜å¾—å°‡<strong>æ°´å¹³èˆ‡å‚ç›´çš„æ²è»¸æŒ‡ç¤º</strong>é—œé–‰ï¼Œé€™æ¨£ç•«é¢æœƒæ¯”è¼ƒæ“¬çœŸã€‚</p>
<p><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-storyboard-%E8%A8%AD%E5%AE%9A-content-size-%E5%AF%A6%E7%8F%BE%E6%B0%B4%E5%B9%B3%E6%8D%B2%E5%8B%95%E7%9A%84-scroll-view-2710fa247293">è¨­å®š content sizeï¼Œå¯¦ç¾æ°´å¹³æ²å‹•ï¼Œä¸Šä¸‹æ²å‹•å’Œåˆ†é çš„ scroll view</a></p>
<p><img loading="lazy" src="images/6.png" alt="image"  />

å–æ¶ˆå‹¾é¸æ°´å¹³èˆ‡å‚ç›´ indicatorï¼Œä½¿å¾— scroll view æ²å‹•æ™‚ä¸æœƒé¡¯ç¤ºå·è»¸</p>
<p>Table View çš„ç¬¬ä¸€å€‹ Cell èˆ‡æœ€å¾Œå…©å€‹ Cell ç‚ºäº†ç‰ˆé¢èª¿æ•´ï¼Œä¸­é–“çš„æ­Œæ›²åˆ—è¡¨åªéœ€è¦é€éä¿®æ”¹ row æ•¸å°±å¯ä»¥è¤‡è£½ï¼Œå†ä¿®æ”¹å°é¢ç…§èˆ‡ label å³å¯ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Design Patterns Explained - CH1</title>
      <link>https://blog.cmwang.net/zh/posts/2017/01/design-patterns-explained-ch1/</link>
      <pubDate>Thu, 20 Jan 2022 18:12:53 +0000</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2017/01/design-patterns-explained-ch1/</guid>
      <description>&lt;h1 id=&#34;object-oriented-paradigm&#34;&gt;Object-Oriented Paradigm&lt;/h1&gt;
&lt;p&gt;Purpose: Explain why object-oriented paradigm over functional decomposition.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h1 id="object-oriented-paradigm">Object-Oriented Paradigm</h1>
<p>Purpose: Explain why object-oriented paradigm over functional decomposition.</p>
<h2 id="naive-problem">Naive Problem</h2>
<p>If I were to give you the task of writing code to access a description of shapes that were stored in a database and then display them.</p>
<p>å¦‚æœçµ¦ä½ ä¸€å€‹ä»»å‹™ï¼Œè¦ç·¨å¯«ä¸€æ®µç¨‹å¼ï¼Œå­˜å–åœ¨è³‡æ–™åº«ä¸­å„²å­˜çš„å½¢ç‹€æè¿°ï¼Œç„¶å¾Œå°‡å®ƒé¡¯ç¤ºå‡ºä¾†ã€‚</p>
<h2 id="structural-programming-thinking---possible-steps">Structural Programming thinking - possible steps</h2>
<ol>
<li>Locate the list of shapes in the database. (åœ¨è³‡æ–™åº«ä¸­æ‰¾åˆ°å½¢ç‹€æ¸…å–®)ã€‚</li>
<li>Open up the list of shapes. (æ‰“é–‹å½¢ç‹€æ¸…å–®)ã€‚</li>
<li>Sort the list according to some rules. (ä¾ç…§æŸç¨®è¦å‰‡å°‡æ¸…å–®æ’åº)ã€‚</li>
<li>Display the individual shapes on the monitor. (åœ¨è¢å¹•ä¸Šé¡¯ç¤ºå„ç¨®å½¢ç‹€)ã€‚</li>
</ol>
<h2 id="functional-decomposition-åŠŸèƒ½åˆ†è§£">Functional Decomposition (åŠŸèƒ½åˆ†è§£)</h2>
<p>4a. Identify the type of shape. (è­˜åˆ¥å½¢ç‹€çš„é¡å‹)ã€‚
4b. Get the location of the shape. (ç²å–å½¢ç‹€çš„ä½ç½®)ã€‚</p>
<p>4c. Call the appropriate function that will display the shape, giving it the shapeâ€™s location. (ä»¥å½¢ç‹€çš„ä½ç½®ç‚ºåƒæ•¸ï¼Œå‘¼å«é¡¯ç¤ºå½¢ç‹€çš„ Function)ã€‚</p>
<h2 id="functional-decomposition-çš„æŒ‘æˆ°">Functional Decomposition çš„æŒ‘æˆ°</h2>
<ol>
<li>å®ƒé€šå¸¸æœƒå°è‡´ä¸€å€‹*<strong>*ä¸»**<strong>ç¨‹å¼è² è²¬æ§åˆ¶å­ç¨‹å¼(subprograms)ã€‚ é€™ä½¿å¾—ä¸»ç¨‹å¼æ‰€æ‰¿å—çš„</strong>è²¬ä»»</strong>å¤ªå¤šäº†ï¼šè¦å”èª¿å„ subprogramsï¼Œé‚„è¦æ§åˆ¶ä»–å€‘çš„é †åº (Why not delegation?)ã€‚ <strong>&laquo;ä¸Šå¸ç‰©ä»¶ï¼šèƒ½è€…å¤šå‹&raquo;</strong></li>
<li>å¦‚æœå°‡å¯¦ä½œå„æ­¥é©Ÿçš„æ‰€æœ‰é‚è¼¯éƒ½æ”¾åœ¨ä¸€å€‹å¤§ Function æˆ–å¤§ module çš„è©±ï¼Œå‰‡é€™äº›æ­¥é©Ÿçš„å¯¦è³ªæ€§è®ŠåŒ–ï¼Œéƒ½å¿…é ˆå°é€™å€‹ Function æˆ– module é€²è¡Œä¿®æ”¹ã€‚ <strong>&laquo;å› æ‡‰è®ŠåŒ–çš„èƒ½åŠ›å·®&raquo;</strong></li>
</ol>
<h2 id="è¨è«–">è¨è«–</h2>
<ol>
<li>éœ€æ±‚ç¸½æ˜¯åœ¨æ”¹è®Š <strong>(ä¸è®Šçš„çœŸç†)</strong>ã€‚</li>
<li>æˆ‘å€‘å¯èƒ½ä¸çŸ¥é“æœƒç™¼ç”Ÿä»€éº¼è®ŠåŒ–ï¼Œä½†æˆ‘å€‘èƒ½å¤ çŒœåˆ°å“ªè£¡æœƒè®ŠåŒ–ã€‚<strong>(OO æœ€å¤§çš„å„ªé»ä¹‹ä¸€ï¼Œå°±æ˜¯å¯ä»¥å°è£é€™äº›è®ŠåŒ–å€åŸŸ)ã€‚</strong></li>
<li>èˆ‡å…¶æŠ±æ€¨éœ€è¦ç¸½æ˜¯æ”¹è®Šï¼Œä¸å¦‚æ”¹è®Šé–‹ç™¼æµç¨‹ï¼Œæœ‰æ•ˆçš„å› æ‡‰è®ŠåŒ–ã€‚</li>
</ol>
<h2 id="dealing-with-changes-functional-decomposition">Dealing with Changes: Functional Decomposition</h2>
<p>4c. Call the appropriate function that will display the shape, giving it the shapeâ€™s location. (ä»¥å½¢ç‹€çš„ä½ç½®ç‚ºåƒæ•¸ï¼Œå‘¼å«é¡¯ç¤ºå½¢ç‹€çš„ Function)ã€‚</p>
<p><strong>Using Modularity to Contain Variation</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="nl">function</span><span class="p">:</span> <span class="n">display</span> <span class="n">shape</span>
</span></span><span class="line"><span class="cl"><span class="nl">input</span><span class="p">:</span> <span class="n">type</span> <span class="n">of</span> <span class="n">shape</span><span class="p">,</span> <span class="n">description</span> <span class="n">of</span> <span class="n">shape</span>
</span></span><span class="line"><span class="cl"><span class="nl">action</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">   <span class="k">switch</span> <span class="p">(</span><span class="n">type</span> <span class="n">of</span> <span class="n">shape</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nl">square</span><span class="p">:</span> <span class="n">put</span> <span class="n">display</span> <span class="n">function</span> <span class="k">for</span> <span class="n">square</span> <span class="n">here</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nl">circle</span><span class="p">:</span> <span class="n">put</span> <span class="n">display</span> <span class="n">function</span> <span class="k">for</span> <span class="n">circle</span> <span class="n">here</span>
</span></span></code></pre></div><h2 id="è¨è«–-1">è¨è«–</h2>
<ol>
<li>å¦‚æœè¦é¡¯ç¤ºä¸€å€‹æ–°çš„å½¢ç‹€(ä¾‹å¦‚ä¸‰è§’å½¢)ï¼Œæˆ‘å¯èƒ½åªéœ€è¦æ”¹é€™å€‹æ¨¡çµ„(å¸Œæœ›æ˜¯)ã€‚</li>
<li>é€™å€‹æ¨¡çµ„çš„è¼¸å…¥æ˜¯ type of shape, description of shapeï¼Œå¦‚æœä»Šå¤©ä½¿ç”¨ä¸åŒæ–¹å¼æä¾›è¼¸å…¥(ä¾‹å¦‚ array of points æˆ–å…¶ä»–æ–¹å¼)ï¼Œè©²æ€éº¼è¾¦ï¼Ÿ</li>
</ol>
<hr>
<h2 id="functional-decomposition-å…©å€‹å¯èƒ½çš„å•é¡Œ">Functional Decomposition å…©å€‹å¯èƒ½çš„å•é¡Œ</h2>
<ol>
<li><strong>Weak cohesion</strong> (Cohesion refers to how â€œclosely the operations in a routine are related; cohesion as <strong>clarity</strong> because the more that operations are related in a routine (or a class), the easier it is to understand things.)</li>
<li><strong>Tight Coupling</strong> (Coupling refers to â€œthe strength of a connection between two routines. Coupling is a complement to cohesion.)</li>
</ol>
<p>The goal is to create routines with internal integrity <strong>(strong cohesion)</strong> and small, direct, visible, and flexible relations to other routines <strong>(loose coupling)</strong>.</p>
<hr>
<h2 id="å¾æ—¥å¸¸ç”Ÿæ´»å€Ÿé¡">å¾æ—¥å¸¸ç”Ÿæ´»å€Ÿé¡</h2>
<p>You are an instructor at a conference. People in your class have another class to attend following yours, but donâ€™t know where it is located. One of your responsibilities is to make sure everyone knows how to get to the next class.</p>
<p>ä½ çš„è²¬ä»»æ˜¯ç¢ºä¿å¤§å®¶çŸ¥é“æ€éº¼å»åˆ°ä¸‹ä¸€å ‚èª²çš„ä½ç½®ã€‚</p>
<hr>
<h2 id="å¯èƒ½çš„æ­¥é©Ÿ">å¯èƒ½çš„æ­¥é©Ÿ</h2>
<ol>
<li>Get list of people in the class.</li>
<li>For each person on this list, do the following:
<ol>
<li>Find the next class he or she is taking.</li>
<li>Find the location of that class.</li>
<li>Find the way to get from your classroom to the personâ€™s next class.</li>
<li>Tell the person how to get to his or her next class.</li>
</ol>
</li>
</ol>
<hr>
<h2 id="æ‰€ä»¥ä½ å¯èƒ½éœ€è¦é€™éº¼åš">æ‰€ä»¥ä½ å¯èƒ½éœ€è¦é€™éº¼åš</h2>
<ol>
<li>A way of getting the list of people in the class.</li>
<li>A way of getting the schedule for each person in the class.</li>
<li>A program that gives someone directions from your classrom to any other classroom.</li>
<li>A control program that works for each person in the class and does the reuqired steps for each person.</li>
</ol>
<hr>
<h2 id="ä¸-ä½ æ‡‰è©²æœƒé€™æ¨£åš">ä¸! ä½ æ‡‰è©²æœƒé€™æ¨£åš</h2>
<p>ä½ å¯èƒ½æœƒæŠŠå¾é€™å€‹æ•™å®¤åˆ°å…¶ä»–æ•™å®¤çš„è·¯ç·šè²¼å‡ºä¾†ï¼Œç„¶å¾Œå‘Šè¨´æ‰€æœ‰äººï¼šæˆ‘å€‘å·²ç¶“å°‡ä¸‹ä¸€å ‚èª²çš„åœ°é»å’Œå…¶ä»–æ•™å®¤çš„ä½ç½®éƒ½è²¼åœ¨å¾Œé¢äº†ï¼Œè«‹æ ¹æ“šå®ƒæ‰¾åˆ°ä½ å€‘ä¸‹ä¸€å ‚èª²çš„æ•™å®¤ã€‚</p>
<p>You would probably post directions to go from this classroom to the other classrooms and then tell everyone in the class, <strong><em>I have posted the locations of the classes following this in the back of the room, as well as the locations of the other classrooms. Please use them to go to your next classroom.</em></strong></p>
<hr>
<h2 id="å…©ç¨®ç­–ç•¥çš„å·®åˆ¥">å…©ç¨®ç­–ç•¥çš„å·®åˆ¥</h2>
<ol>
<li>Giving <strong>explicit directions</strong> to everyone.</li>
<li>Giving <strong>general instructions</strong> and then expect the each person will figure out how to do the task individually. <strong>(è²¬ä»»è½‰ç§» delegation)</strong></li>
</ol>
<hr>
<h2 id="éœ€æ±‚åˆæ”¹è®Šäº†">éœ€æ±‚åˆæ”¹è®Šäº†</h2>
<p>å¦‚æœæˆ‘è¢«å‘ŠçŸ¥ï¼Œéœ€è¦çµ¦æ“”ä»»åŠ©æ•™å·¥ä½œçš„å­¸ç”Ÿä¸€äº›ç‰¹æ®ŠæŒ‡ç¤ºã€‚ä»–å€‘å¯èƒ½éœ€è¦åœ¨ä¸‹ä¸€å ‚èª²å‰æ”¶é›†æœ¬å ‚èª²å­¸ç”Ÿçš„è©•åƒ¹ï¼Œä¸¦ä¸”äº¤åˆ°è¾¦å…¬å®¤ã€‚</p>
<ol>
<li>ç¬¬ä¸€ç¨®æ–¹å¼ï¼Œä¸å¾—ä¸æ”¹æ§åˆ¶ç¨‹å¼ï¼Œ<strong>å€åˆ¥ç ”ç©¶ç”Ÿè·Ÿå¤§å­¸ç”Ÿ</strong>ï¼Œç„¶å¾Œçµ¦ç ”ç©¶ç”Ÿç‰¹åˆ¥çš„æŒ‡ç¤ºã€‚</li>
<li>ç¬¬äºŒç¨®æ–¹å¼ï¼Œåªéœ€è¦ç‚ºç ”ç©¶ç”Ÿå†ç·¨å¯«ä¸€å€‹ç¨‹å¼ï¼Œä½†æ§åˆ¶ç¨‹å¼ä»ç„¶åªéœ€è¦èªª: <strong>æ‰¾åˆ°ä½ å€‘çš„ä¸‹ä¸€å ‚æ•™å®¤</strong>ã€‚</li>
</ol>
<hr>
<h2 id="ç‚ºä»€éº¼æœ‰é€™éº¼å¤§çš„å·®ç•°">ç‚ºä»€éº¼æœ‰é€™éº¼å¤§çš„å·®ç•°</h2>
<ol>
<li>äººå€‘å°è‡ªå·±çš„è¡Œç‚ºè² è²¬ï¼Œè€Œä¸å†ç”±ä¸€å€‹ä¸­å¤®æ§åˆ¶ç¨‹å¼è² è²¬æ±ºå®šã€‚</li>
<li>æ§åˆ¶ç¨‹å¼å¯ä»¥èˆ‡ä¸åŒé¡å‹çš„å­¸ç”Ÿäº¤æµ(å¤§å­¸ç”Ÿæˆ–ç ”ç©¶ç”Ÿ)ã€‚</li>
<li>æ§åˆ¶ç¨‹å¼ä¸éœ€è¦çŸ¥é“å­¸ç”Ÿå¾é€™å€‹æ•™å®¤åˆ°ä¸‹ä¸€å€‹æ•™å®¤å¯èƒ½éœ€è¦æ¡å–çš„ä»»ä½•ç‰¹æ®Šæ­¥é©Ÿã€‚</li>
</ol>
<hr>
<h2 id="è»Ÿé«”é–‹ç™¼çš„ä¸‰ç¨®è¦–è§’">è»Ÿé«”é–‹ç™¼çš„ä¸‰ç¨®è¦–è§’</h2>
<ol>
<li><strong>Conceptual:</strong> è¡¨ç¤º domain conceptsï¼Œä¸ç®¡å¦‚ä½•å¯¦ä½œã€‚å›ç­”é€™å€‹å•é¡Œï¼š<strong>What am I responsibile for?</strong></li>
<li><strong>Specification:</strong> é—œæ³¨è»Ÿé«”çš„ interfaceï¼Œä½†é‚„æ˜¯ä¸ç®¡å¦‚ä½•å¯¦ä½œã€‚å›ç­”é€™å€‹å•é¡Œï¼š<strong>How am I used?</strong></li>
<li><strong>Implementation:</strong> æˆ‘å€‘éƒ½å¾ˆç†Ÿã€‚å›ç­”é€™å€‹å•é¡Œï¼š <strong>How do I fulfill my responsibilities?&quot;</strong></li>
</ol>
<hr>
<h2 id="ä¸åŒè¦–è§’çš„ç”¨é€”">ä¸åŒè¦–è§’çš„ç”¨é€”</h2>
<p>æ¦‚å¿µå±¤æ¬¡ä¸Šçš„æºé€šï¼šä½ å‘Šè¨´å­¸ç”Ÿçš„æ˜¯ã€Œä½ è¦ä»–å€‘æ€éº¼åšã€ï¼Œè€Œä¸æ˜¯ã€Œå¦‚ä½•å»åšã€ã€‚ (you are telling people what you want, not how to do it.)</p>
<p>åœ¨æ¦‚å¿µå±¤æ¬¡ä¸Šäº¤æµï¼Œè€Œåœ¨å¦ä¸€å±¤æ¬¡(å¯¦ä½œ)ä¸ŠåŸ·è¡Œï¼Œé€™æ¨£è¬›å¸«å°±ä¸éœ€è¦çŸ¥é“å…·é«”çš„å¯¦ä½œç´°ç¯€ã€‚åªéœ€è¦ä¸€èˆ¬æ€§ï¼Œæ¦‚å¿µæ€§çš„çŸ¥é“å³å¯ã€‚</p>
<p><strong>æ•ˆåŠ›</strong>ï¼šåªè¦æ¦‚å¿µä¸è®Šï¼Œè«‹æ±‚è€…èˆ‡<strong>å¯¦ä½œç´°ç¯€çš„è®ŠåŒ–</strong>å°±è¢«éš”é›¢é–‹ä¾†ã€‚</p>
<hr>
<h2 id="object-oriented-paradigm-1">Object-Oriented Paradigm</h2>
<p>ä½¿ç”¨ç‰©ä»¶çš„å„ªé»åœ¨æ–¼ï¼Œå¯ä»¥å®šç¾©ç‰©ä»¶è² è²¬è‡ªå·±çš„äº‹å‹™ã€‚</p>
<p><img loading="lazy" src="resp.png" alt="resp"  />
</p>
<hr>
<h2 id="è¨è«–-2">è¨è«–</h2>
<p>The <strong>objects</strong> were identified by looking at the entities in the <strong>problem domain</strong>. I identified the <strong>responsibilities (or methods)</strong> for each object by looking at what these entities <strong>need to do</strong>.</p>
<p>&ndash;
â˜†â˜†â˜† ç†è§£ç‰©ä»¶çš„æœ€ä½³æ–¹å¼ â˜†â˜†â˜†
<strong>å°‡å…¶çœ‹ç‚ºå…·æœ‰è²¬ä»»çš„æ±è¥¿</strong>ã€‚ç‰©ä»¶æ‡‰è©²è‡ªå·±è² è²¬è‡ªå·±ï¼Œè€Œä¸”æ‡‰è©²æ¸…æ¥šåœ°å®šç¾©è²¬ä»»ã€‚</p>
<hr>
<h2 id="apply-fowlers-perspectives">Apply Fowler&rsquo;s Perspectives</h2>
<ul>
<li>At the <strong>conceptual</strong> level, an object is a set of responsibilities. (ä¸€çµ„è²¬ä»»)</li>
<li>At the <strong>specification</strong> level, an object is a set of methods (behaviors) that can be invoked by other objects or by itself. (ä¸€çµ„è¡Œç‚º)</li>
<li>At the <strong>implementation</strong> level, an object is code and data and computational interactions between them.</li>
</ul>
<hr>
<h2 id="object-oriented-approach">Object-Oriented Approach</h2>
<ol>
<li>Start the control program.</li>
<li>Instantiate the collection of students in the classroom.</li>
<li>Tell the collection to have the students go to their next class.</li>
<li>The collection tells each student to go to his or her next class.</li>
<li>Each student:
<ol>
<li>Finds where his next class is.</li>
<li>Determines how to get there.</li>
<li>Goes there.</li>
</ol>
</li>
<li>Done.</li>
</ol>
<hr>
<h2 id="abstract-and-polymorphism">Abstract and Polymorphism</h2>
<ul>
<li>Student abstract class, GraduageStudent and RegularStudent classes.</li>
<li>Abstract classes define what other, related, classes can do. Abstract classes act as <strong>placeholders</strong> for other classes.</li>
<li>Collection åªéœ€è¦è™•ç† Student é€™å€‹ Concept (Abstract)ï¼Œæ¯ä¸€ç¨® Student éƒ½å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ–¹å¼å¯¦ä½œåŠŸèƒ½ (Concrete)ã€‚</li>
<li>ç•¶æˆ‘å€‘é€éæŠ½è±¡åƒè€ƒï¼Œæ¦‚å¿µæ€§çš„è¦æ±‚ç‰©ä»¶åšä»€éº¼æ™‚ï¼Œå°‡å¾—åˆ°ä¸åŒçš„è¡Œç‚ºï¼Œå…·é«”è¡Œç‚ºå–æ±ºæ–¼ Derived Class çš„å¯¦ä½œã€‚<strong>(Polymorphism)</strong></li>
</ul>
<hr>
<h2 id="å›åˆ°ä¸€é–‹å§‹çš„å•é¡Œ">å›åˆ°ä¸€é–‹å§‹çš„å•é¡Œ</h2>
<ol>
<li>Locate the list of shapes in the database. (åœ¨è³‡æ–™åº«ä¸­æ‰¾åˆ°å½¢ç‹€æ¸…å–®)ã€‚</li>
<li>Open up the list of shapes. (æ‰“é–‹å½¢ç‹€æ¸…å–®)ã€‚</li>
<li>Sort the list according to some rules. (ä¾ç…§æŸç¨®è¦å‰‡å°‡æ¸…å–®æ’åº)ã€‚</li>
<li>Display the individual shapes on the monitor. (åœ¨è¢å¹•ä¸Šé¡¯ç¤ºå„ç¨®å½¢ç‹€)ã€‚</li>
</ol>
<hr>
<h2 id="object-oriented-approach-12">Object-Oriented Approach (1/2)</h2>
<p><img loading="lazy" src="resp2.png" alt="esp2.png"  />
</p>
<hr>
<h2 id="object-oriented-approach-22">Object-Oriented Approach (2/2)</h2>
<ol>
<li>ä¸»ç¨‹å¼å»ºç«‹ä¸€å€‹ <em>ShapeDataBase</em> ç‰©ä»¶ã€‚</li>
<li>ä¸»ç¨‹å¼è¦æ±‚ database object æ‰¾åˆ°æˆ‘æ„Ÿèˆˆè¶£çš„ä¸€çµ„å½¢ç‹€ï¼Œä¸¦ä¸” instantiate ä¸€å€‹ä¿å­˜é€™äº›å½¢ç‹€çš„ collection ç‰©ä»¶.</li>
<li>ä¸»ç¨‹å¼è¦æ±‚ Collection ç‰©ä»¶æ’åºæ‰€å­˜æ”¾çš„å½¢ç‹€ã€‚</li>
<li>ä¸»ç¨‹å¼è¦æ±‚ Collection ç‰©ä»¶é¡¯ç¤ºå½¢ç‹€ã€‚</li>
<li>Collection ç‰©ä»¶è¦æ±‚æ‰€å­˜æ”¾çš„æ¯å€‹å½¢ç‹€é¡¯ç¤ºè‡ªå·±ã€‚</li>
<li>æ¯å€‹å½¢ç‹€æ ¹æ“šå½¢ç‹€ç¨®é¡é¡¯ç¤ºè‡ªå·±ã€‚</li>
</ol>
<hr>
<h2 id="éœ€æ±‚åˆæ”¹è®Šäº†-1">éœ€æ±‚åˆæ”¹è®Šäº†</h2>
<ul>
<li>
<p>å¢åŠ æ–°çš„å½¢ç‹€ (ä¸‰è§’å½¢)</p>
<ol>
<li>å¢åŠ ä¸€å€‹æ–°çš„ä¸‰è§’å½¢ Concrete Class</li>
<li>åœ¨æ­¤ Derived Class å¯¦ä½œè‡ªå·±çš„é¡¯ç¤ºæ–¹æ³•ã€‚</li>
</ol>
</li>
<li>
<p>æ›´æ”¹æ’åºæ–¹å¼</p>
<ol>
<li>ä¿®æ”¹ Collection çš„ Sorting algorithm</li>
</ol>
</li>
</ul>
<p><strong>çµæœ</strong>ï¼šThe object-oriented approach has limited the impact of <strong>changing</strong> requirements.</p>
<hr>
<h2 id="å°è£çš„å„ªé»">å°è£çš„å„ªé»</h2>
<ol>
<li>ä½¿ç”¨æ›´å®¹æ˜“ï¼Œå› ç‚ºä½¿ç”¨è€…ä¸å†éœ€è¦æ“”å¿ƒå¯¦ä½œå•é¡Œ</li>
<li>å¯ä»¥åœ¨ä¸è€ƒæ…®å‘¼å«è€…çš„æƒ…æ³ä¸‹ä¿®æ”¹å¯¦ä½œ (å› ç‚ºå®ƒä¸€é–‹å§‹å°±ä¸çŸ¥é“ç‰©ä»¶æ€éº¼å¯¦ä½œçš„ depend on interface, not implementation)</li>
<li>The internals of an object are unknown to other objects. (å°è£ä½¿ç‰©ä»¶å…§éƒ¨è¡Œç‚ºçš„è®ŠåŒ–å°å…¶ä»–ç‰©ä»¶è®Šå¾—é€æ˜äº† <strong>&lt;ä¸å¯è¦‹&gt;</strong>)ã€‚</li>
</ol>
<hr>
<h2 id="take-away">Take away</h2>
<ol>
<li>å°‡ç‰©ä»¶çœ‹ç‚º<strong>å…·æœ‰è²¬ä»»</strong>çš„æ±è¥¿ã€‚ç‰©ä»¶æ‡‰è©²è‡ªå·±è² è²¬è‡ªå·±ï¼Œè€Œä¸”æ‡‰è©²æ¸…æ¥šåœ°å®šç¾©è²¬ä»»ã€‚</li>
<li>ç‰©ä»¶çœŸæ­£çš„å¨åŠ›ä¸åœ¨æ–¼ç¹¼æ‰¿ï¼Œè€Œæ˜¯ä¾†è‡ªæ–¼<strong>å°è£è¡Œç‚º</strong>(æ¡å–æ›´å»£ç¾©çš„å°è£å®šç¾©)ã€‚</li>
<li>OO æœ€å¤§çš„å„ªé»ä¹‹ä¸€ï¼Œå°±æ˜¯å¯ä»¥<strong>å°è£</strong>é€™äº›<strong>è®ŠåŒ–å€åŸŸ</strong>ã€‚</li>
<li>æŠ½è±¡èˆ‡è²¬ä»»è½‰å«çš„å¥½è™• (placeholder and delegation)ã€‚</li>
<li>ä¸‰ç¨®è¦–è§’çš„æ‡‰ç”¨ (åœ¨æŠ½è±¡å±¤æ¬¡ä¸Šæºé€šï¼Œåœ¨å¯¦ä½œå±¤æ¬¡ä¸ŠåŸ·è¡Œ)ã€‚</li>
</ol>]]></content:encoded>
    </item>
    
    <item>
      <title>Design Patterns Explained - CH8</title>
      <link>https://blog.cmwang.net/zh/posts/2017/01/design-patterns-explained-ch8/</link>
      <pubDate>Sat, 21 Jan 2017 20:12:53 +0000</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2017/01/design-patterns-explained-ch8/</guid>
      <description>&lt;h1 id=&#34;expanding-our-horizons&#34;&gt;Expanding Our Horizons&lt;/h1&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Object&lt;/li&gt;
&lt;li&gt;Encapsulation&lt;/li&gt;
&lt;li&gt;Inheritance&lt;/li&gt;
&lt;li&gt;Handling variation&lt;/li&gt;
&lt;li&gt;Commonality and variability analysis&lt;/li&gt;
&lt;li&gt;Abstract class and its derived classes&lt;/li&gt;
&lt;/ul&gt;</description>
      <content:encoded><![CDATA[<h1 id="expanding-our-horizons">Expanding Our Horizons</h1>
<h2 id="overview">Overview</h2>
<ul>
<li>Object</li>
<li>Encapsulation</li>
<li>Inheritance</li>
<li>Handling variation</li>
<li>Commonality and variability analysis</li>
<li>Abstract class and its derived classes</li>
</ul>
<h2 id="objects-traditional-view-and-new-view">Objects: Traditional view and new view</h2>
<h3 id="traditional-view">Traditional View</h3>
<ul>
<li>Data with methods - <strong>smart data</strong></li>
<li>too narrow from <strong>implementation</strong> perspective</li>
</ul>
<h3 id="broad-view">Broad View</h3>
<ul>
<li>From <strong>conceptual</strong> perspective</li>
<li>an object is an <em>entity that has responsibilities</em> (è²¬ä»»), these responsibilities define the behavior of the object. Or an <em>entity that has specific behavior</em> (ç‰¹å®šè¡Œç‚º).</li>
</ul>
<h2 id="focus-on-intentionmotivation-not-implementation">Focus on intention/motivation not implementation</h2>
<p>This view enables us to build software in two steps:</p>
<ol>
<li>Make a preliminary design without worrying about all the details involved.</li>
<li>Implement the design.</li>
</ol>
<p>The reason this works is that we only have to focus on the objectâ€™s <strong>public interface</strong> â€” the communication window through which I ask the object to do something.</p>
<p>Hiding implementations behind interfaces essentially <strong>decouples</strong> them from the using objects.</p>
<hr>
<h2 id="encapsulation-traditional-view-and-new-view">Encapsulation: Traditional view and new view</h2>
<h3 id="traditional-view-1">Traditional View</h3>
<ul>
<li>data hiding</li>
</ul>
<h3 id="broad-view-1">Broad View</h3>
<ul>
<li><strong>any kind of hiding</strong>
<ul>
<li>Implementations (data, methods..)</li>
<li><strong>Drived</strong> classes (<strong>Encapsulation of type</strong> is achieved when there is an <em>abstract class</em> with derivations (or an interface with implementations) that are used <em>polymorphically</em>)</li>
<li>Design details</li>
<li>Instantiation rules (ex. creational patterns)</li>
</ul>
</li>
</ul>
<h2 id="advantage">Advantage</h2>
<p>It gives us a better way to split up (decompose) our programs. The <strong>encapsulating layers</strong> become the <strong>interfaces</strong> we design to. (å°è£å±¤æˆç‚ºè¨­è¨ˆéœ€è¦éµå¾ªçš„ä»‹é¢)</p>
<p>By encapsulating different kinds of subclasses (<strong>encapsulation of type</strong>), we can add new ones without changing any of the client programs using them. (<em>GoF typically means when they mention encapsulation</em>)</p>
<hr>
<h2 id="inheritance">Inheritance</h2>
<h3 id="traditional-view-2">Traditional View</h3>
<ul>
<li><strong>reuse</strong> of classes</li>
<li>achived by creating classes and then deriving new (<em>spcialized</em>) classes bases on these base (<em>generalized</em>) classes</li>
</ul>
<h3 id="broad-view-2">Broad View</h3>
<ul>
<li>using inheritance for specialization, however
<ul>
<li>can cause weak cohesion</li>
<li>reduces possibility of reuse</li>
<li>does not scale well with variation</li>
</ul>
</li>
<li><em>to classify classes as things that behave the same way</em>. (<strong>placeholder</strong>)</li>
</ul>
<hr>
<h2 id="find-what-is-varying-and-encapsulate-it">Find What Is Varying and Encapsulate It</h2>
<blockquote>
<p>Consider <strong>what</strong> should be variable in your design. This approach is the opposite of focusing on the <strong>cause</strong> of redesign. Instead of considering what might force a change to a design, consider what you want to be <strong><em>able</em></strong> to change without redesign. The focus here is on <strong><em>encapsulating the concept that varies</em></strong>, a theme of many design patterns.
&ndash; GoF, Design Patterns</p>
</blockquote>
<hr>
<h2 id="more-about-gofs-encapsulation">More about GoF&rsquo;s Encapsulation</h2>
<ul>
<li>Design Patterns use inheritance to classify variations in behaviors.</li>
<li>Hiding classes with an abstract class or interface â€” <strong>type encapsulation</strong>.</li>
<li>Containing a reference of this <em>abstract class</em> or <em>interface</em> type (aggregation) <strong>hides</strong> these <em>derived classes</em> that represent <strong>variations</strong> in behavior.</li>
<li>In effect, many design patterns <em>use encapsulation to create layers</em> between objects.</li>
</ul>
<hr>
<h2 id="containing-variation-in-data-vs-containing-variation-in-behavior">Containing variation in data vs containing variation in behavior</h2>
<h3 id="handling-variation-in-data">Handling variation in data</h3>
<ul>
<li>Have a data member that tells me what type of movement my object has.</li>
<li>Have two different types of <strong>Animals</strong> (both derived from the base <strong>Animal</strong> class) â€” one for walking and one for flying.</li>
</ul>
<h3 id="handling-variation-in-behavior-with-objects">Handling variation in behavior with objects</h3>
<p>Using objects to contain variation in attributes and using objects to contain variation in behavior are very similar. Don&rsquo;t afraid.</p>
<hr>
<h2 id="commonality-and-variability">Commonality and Variability</h2>
<p>Identify <strong>where</strong> things vary (commonality analysis) and then identify <strong>how</strong> they vary (variability analysis).</p>
<p><strong>Commonality analysis</strong> is the search for common elements that helps us understand how family members are the same.</p>
<p><strong>Variability analysis</strong> reveals how family members vary. Variability only makes sense within a given commonality.</p>
<p>Ex. Whiteboard marker, pencil, ballpoint pen</p>
<ul>
<li>Commonality: writing instrument</li>
<li>Variability: material to write, shape..</li>
</ul>
<h2 id="commonality-and-variability-and-abstract-class">Commonality and Variability and Abstract class</h2>
<p><strong>Commonality analysis</strong> seeks structure that is unlikely to change over time, while <strong>variability analysis</strong> captures structure that is likely to change. <strong><em>Variability analysis makes sense only in terms of the context defined by the associated commonality analysis</em></strong>.
In other words, if variations are the specific concrete cases in the domain, commonality defines the concepts in the domain that tie them together. The <strong><em>common concepts</em></strong> will be represented by <strong>abstract classes</strong>. The <strong><em>variations</em></strong> found by variability analysis will be implemented by the <strong>concrete classes</strong>.</p>
<h2 id="relationship-between-commonality-and-variability-perspectives-and-abstract-classes">Relationship between Commonality and Variability, perspectives, and abstract classes</h2>
<p><img loading="lazy" src="relationship.png" alt="relationship"  />
</p>
<hr>
<h2 id="benefits-of-using-abstract-classes-for-specialization">Benefits of using abstract classes for specialization</h2>
<p><img loading="lazy" src="benefits.png" alt="benefits"  />
</p>
<hr>
<h2 id="two-step-procedure-for-design">Two-Step Procedure for Design</h2>
<p>Ask yourself:</p>
<ul>
<li>When defining an <strong>abstract class</strong> (commonality):
<ul>
<li>What <strong>interface</strong> is needed to handle all the responsibilities (core concepts from the conceptual perspective) of this class?</li>
</ul>
</li>
<li>When defining <strong>derived classes</strong>:
<ul>
<li>Given this particular implementation (this <strong>variation</strong>), how can I implement it (variation) with the given specification?</li>
</ul>
</li>
</ul>
<hr>
<h2 id="take-away">Take away</h2>
<p>Think object-oriented in a broad way.</p>
<ul>
<li>Object: an <em>entity that has responsibilities (specific behavior)</em></li>
<li>Encapsulation: <strong>any</strong> kind of <strong>hiding</strong> (instantiation rule, type..)</li>
<li>Inheritance: use for <strong>specialization</strong> and <em>classify classes as things that behave the same way</em>.</li>
</ul>
<p><strong>Find what is varying and encapsulate it</strong> (in behavior).</p>
<p>Commonality, variability and abstract class: use inheritance to classify variations in behaviors.</p>]]></content:encoded>
    </item>
    
    <item>
      <title>è¨­è¨ˆæ¨¡å¼å­¸ç¿’è³‡æº</title>
      <link>https://blog.cmwang.net/zh/posts/2017/01/design-patterns-resources/</link>
      <pubDate>Thu, 12 Jan 2017 17:57:07 +0000</pubDate>
      
      <guid>https://blog.cmwang.net/zh/posts/2017/01/design-patterns-resources/</guid>
      <description>ä¸€äº›è¨­è¨ˆæ¨¡å¼çš„é€£çµï¼Œå¹´ä»£æœ‰é»ä¹…äº†ï¼Œä¸æ˜¯å¾ˆå€¼å¾—åƒè€ƒäº†</description>
      <content:encoded><![CDATA[<p>ä»¥å‰æ”¶é›†çš„ä¸€äº›å­¸ç¿’è³‡æºï¼Œå¹´ä»£æœ‰é»ä¹…é ï¼Œè«‹æ–Ÿé…Œåƒè€ƒã€‚</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="http://steventtud.logdown.com/posts/2014/01/02/teddy-flow-design-pattern">[Design Pattern]è³‡æºç¸½æ•´ç†</a></li>
<li><a href="http://www.uml.org.cn/sjms/sjms.asp#9">UML è»Ÿä»¶å·¥ç¨‹çµ„ç¹”</a></li>
<li><a href="http://design-patterns.readthedocs.io/zh_CN/latest/index.html#">åœ–èªªè¨­è¨ˆæ¨¡å¼</a></li>
<li><a href="http://www.cnblogs.com/oomusou/archive/2007/03/31/695076.html">çœŸ OO æ— åŒ ä¹‹ çœŸä¹±èˆä¹¦</a></li>
<li><a href="https://sourcemaking.com/design_patterns">Source Making</a></li>
<li><a href="http://best-practice-software-engineering.ifs.tuwien.ac.at/patterns.html">Best Practice Software Engineering</a></li>
<li><a href="http://rockssdlog.blogspot.tw/search?updated-max=2012-04-19T15:35:00%2B08:00&amp;max-results=7&amp;m=1">ç™½è©± Rock çš„ç³»çµ±é–‹ç™¼é›œè¨˜</a></li>
<li><a href="https://dotblogs.com.tw/joysdw12/series/1?qq=Design%2520Pattern">.Net è›¤ä»€éº¼?</a></li>
<li><a href="http://openhome.cc/Gossip/DesignPattern/">éé—œèªè¨€: è¨­è¨ˆæ¨¡å¼</a></li>
<li><a href="http://www.oodesign.com/prototype-pattern.html">OO Design</a></li>
<li><a href="https://pl.cs.jhu.edu/oose/lectures/design-patterns.shtml">Object-Oriented Software Engineering</a></li>
<li><a href="http://blog.monochromegane.com/blog/2014/03/23/struct-implementaion-patterns-in-golang/">Go è¨€èªã§ã®æ§‹é€ é«”å®Ÿè£ãƒ‘ã‚¿ãƒ¼ãƒ³</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/dn568099.aspx">Cloud Design Patterns: Prescriptive Architecture Guidance for Cloud Applications</a></li>
</ul>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
