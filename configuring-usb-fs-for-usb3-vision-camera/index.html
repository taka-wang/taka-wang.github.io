<!DOCTYPE html>
<html lang="en">
<head>

    <title>Configuring USB-FS for USB3 Vision Camera</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <link rel="preload" as="style" href="/assets/built/screen.css?v=9aaa8e31ca" />
    <link rel="preload" as="script" href="/assets/built/casper.js?v=9aaa8e31ca" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=9aaa8e31ca" />

    <meta name="description" content="This post explains how to increase the buffer memory for USB-FS devices on Linux systems in order to make full use of the imaging hardware’s capabilities. By default, USB-FS on Linux systems only…">
    <link rel="icon" href="https://blog.cmwang.net/content/images/size/w256h256/2024/01/2-removebg-preview.png" type="image/png">
    <link rel="canonical" href="https://blog.cmwang.net/configuring-usb-fs-for-usb3-vision-camera/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="Liberation Notes">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Configuring USB-FS for USB3 Vision Camera">
    <meta property="og:description" content="This post explains how to increase the buffer memory for USB-FS devices on Linux systems.">
    <meta property="og:url" content="https://blog.cmwang.net/configuring-usb-fs-for-usb3-vision-camera/">
    <meta property="og:image" content="https://blog.cmwang.net/content/images/v2/resize:fit:1200/1-uoy9jp33j7xif2emebtdcg.jpg">
    <meta property="article:published_time" content="2022-12-29T13:14:24.000Z">
    <meta property="article:modified_time" content="2022-12-29T13:14:24.000Z">
    <meta property="article:tag" content="Industrial Camera Systems">
    <meta property="article:tag" content="Embedded Systems">
    <meta property="article:tag" content="U3v">
    <meta property="article:tag" content="Computer Vision">
    <meta property="article:tag" content="Machine Vision System">
    
    <meta property="article:publisher" content="https://www.facebook.com/ghost">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Configuring USB-FS for USB3 Vision Camera">
    <meta name="twitter:description" content="This post explains how to increase the buffer memory for USB-FS devices on Linux systems.">
    <meta name="twitter:url" content="https://blog.cmwang.net/configuring-usb-fs-for-usb3-vision-camera/">
    <meta name="twitter:image" content="https://blog.cmwang.net/content/images/v2/resize:fit:1200/1-uoy9jp33j7xif2emebtdcg.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Taka Wang">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Industrial Camera Systems, Embedded Systems, U3v, Computer Vision, Machine Vision System">
    <meta name="twitter:site" content="@ghost">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="319">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Liberation Notes",
        "url": "https://blog.cmwang.net/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.cmwang.net/content/images/size/w256h256/2024/01/2-removebg-preview.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Taka Wang",
        "image": {
            "@type": "ImageObject",
            "url": "https://blog.cmwang.net/content/images/v2/resize:fill:144:144/1-mzehvowngfwyye2pswx_vw.png",
            "width": 144,
            "height": 144
        },
        "url": "https://blog.cmwang.net/author/takawang/",
        "sameAs": []
    },
    "headline": "Configuring USB-FS for USB3 Vision Camera",
    "url": "https://blog.cmwang.net/configuring-usb-fs-for-usb3-vision-camera/",
    "datePublished": "2022-12-29T13:14:24.000Z",
    "dateModified": "2022-12-29T13:14:24.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://blog.cmwang.net/content/images/max/800/1-uoy9jp33j7xif2emebtdcg.jpg",
        "width": 800,
        "height": 213
    },
    "keywords": "Industrial Camera Systems, Embedded Systems, U3v, Computer Vision, Machine Vision System",
    "description": "This post explains how to increase the buffer memory for USB-FS devices on Linux systems.",
    "mainEntityOfPage": "https://blog.cmwang.net/configuring-usb-fs-for-usb3-vision-camera/"
}
    </script>

    <meta name="generator" content="Ghost 5.78">
    <link rel="alternate" type="application/rss+xml" title="Liberation Notes" href="https://blog.cmwang.net/rss/">
    
    <script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="415aa5f59e59c087cacf652d7b" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://blog.cmwang.net/" crossorigin="anonymous"></script>
    
    <link href="https://blog.cmwang.net/webmentions/receive/" rel="webmention">
    <script defer src="/public/cards.min.js?v=9aaa8e31ca"></script><style>:root {--ghost-accent-color: #FF1A74;}</style>
    <link rel="stylesheet" type="text/css" href="/public/cards.min.css?v=9aaa8e31ca">

</head>
<body class="post-template tag-industrial-camera-systems tag-embedded-systems tag-u3v tag-computer-vision tag-machine-vision-system tag-hash-medium tag-hash-import-2024-02-01-00-16 is-head-left-logo has-cover">
<div class="viewport">

    <header id="gh-head" class="gh-head outer">
        <div class="gh-head-inner inner">
            <div class="gh-head-brand">
                <a class="gh-head-logo no-image" href="https://blog.cmwang.net">
                        Liberation Notes
                </a>
                <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>
                <button class="gh-burger"></button>
            </div>

            <nav class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="https://blog.cmwang.net/">Home</a></li>
    <li class="nav-about"><a href="https://blog.cmwang.net/about/">About</a></li>
</ul>

            </nav>

            <div class="gh-head-actions">
                        <button class="gh-search gh-icon-btn" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>
            </div>
        </div>
    </header>

    <div class="site-content">
        



<main id="site-main" class="site-main">
<article class="article post tag-industrial-camera-systems tag-embedded-systems tag-u3v tag-computer-vision tag-machine-vision-system tag-hash-medium tag-hash-import-2024-02-01-00-16 image-small">

    <header class="article-header gh-canvas">

        <div class="article-tag post-card-tags">
                <span class="post-card-primary-tag">
                    <a href="/tag/industrial-camera-systems/">Industrial Camera Systems</a>
                </span>
        </div>

        <h1 class="article-title">Configuring USB-FS for USB3 Vision Camera</h1>

            <p class="article-excerpt">This post explains how to increase the buffer memory for USB-FS devices on Linux systems.</p>

        <div class="article-byline">
        <section class="article-byline-content">

            <ul class="author-list">
                <li class="author-list-item">
                    <a href="/author/takawang/" class="author-avatar">
                        <img class="author-profile-image" src="/content/images/size/w100/v2/resize:fill:144:144/1-mzehvowngfwyye2pswx_vw.png" alt="Taka Wang" />
                    </a>
                </li>
            </ul>

            <div class="article-byline-meta">
                <h4 class="author-name"><a href="/author/takawang/">Taka Wang</a></h4>
                <div class="byline-meta-content">
                    <time class="byline-meta-date" datetime="2022-12-29">Dec 29, 2022</time>
                        <span class="byline-reading-time"><span class="bull">&bull;</span> 1 min read</span>
                </div>
            </div>

        </section>
        </div>

            <figure class="article-image">
                <img
                    srcset="/content/images/size/w300/max/800/1-uoy9jp33j7xif2emebtdcg.jpg 300w,
                            /content/images/size/w600/max/800/1-uoy9jp33j7xif2emebtdcg.jpg 600w,
                            /content/images/size/w1000/max/800/1-uoy9jp33j7xif2emebtdcg.jpg 1000w,
                            /content/images/size/w2000/max/800/1-uoy9jp33j7xif2emebtdcg.jpg 2000w"
                    sizes="(min-width: 1400px) 1400px, 92vw"
                    src="/content/images/size/w2000/max/800/1-uoy9jp33j7xif2emebtdcg.jpg"
                    alt="Configuring USB-FS for USB3 Vision Camera"
                />
                    <figcaption>Industrial Cameras</figcaption>
            </figure>

    </header>

    <section class="gh-content gh-canvas">
        <p>This post explains how to increase the buffer memory for USB-FS devices on Linux systems in order to make full use of the imaging hardware’s capabilities. By default, USB-FS on Linux systems only allows 16 MB of buffer memory for all USB devices, which may not be sufficient for high-resolution cameras or multiple-camera set ups, resulting in image acquisition issues. To configure USB-FS and increase the buffer memory limit, the following steps should be taken:</p><p>Note that GRUB is for desktop PC architecture. ARM embedded systems use a different bootloader, as GRUB requires a system with a BIOS, and embedded systems do not have one.</p><ol><li>Create the file <code>/etc/rc.local</code> with the command <code>sudo touch /etc/rc.local</code>. This will create the file, allowing it to be edited.</li><li>Change the permissions of the file with the command <code>sudo chmod 744 /etc/rc.local</code>. This will ensure that the file has the correct permissions to be edited.</li><li>Change the buffer memory limit with the command <code>echo 1000 &gt; /sys/module/usbcore/parameters/usbfs_memory_mb</code>. This command will set the memory limit to 1000 MB, which should be enough to prevent image acquisition issues.</li></ol><pre><code class="language-bash">## /etc/rc.local file contents example 
 
#!/bin/sh -e 
echo 1000 &gt; /sys/module/usbcore/parameters/usbfs_memory_mb 
exit 0</code></pre><p>After changing the memory limit, it is important to confirm the changes have been made correctly. This can be done by running the command <code>cat /sys/module/usbcore/parameters/usbfs_memory_mb</code>, which will display the current memory limit. If the limit is still 16 MB, then the changes will need to be made again. Additionally, further information about USB-FS on Linux can be found in the following sources:</p><ul><li><a href="https://www.flir.asia/support-center/iis/machine-vision/application-note/understanding-usbfs-on-linux/?ref=localhost" rel="noopener">Understanding USBFS on Linux</a></li><li><a href="https://importgeek.wordpress.com/2017/02/26/increase-usbfs-memory-limit-in-ubuntu/?ref=localhost" rel="noopener">Increase USBFS Memory Limit in Ubuntu</a></li><li><a href="https://forums.developer.nvidia.com/t/change-kernel-cmdline-by-edit-etc-default-grub-failed/159831/2?ref=localhost" rel="noopener">Change Kernel Cmdline by Edit /etc/default/grub Failed</a></li></ul>
    </section>


</article>
</main>




            <aside class="read-more-wrap outer">
                <div class="read-more inner">
                        
<article class="post-card post featured keep-ratio">

    <a class="post-card-image-link" href="/ai-iu-astray/">

        <img class="post-card-image"
            srcset="/content/images/size/w300/2024/01/1616593-1.jpg 300w,
                    /content/images/size/w600/2024/01/1616593-1.jpg 600w,
                    /content/images/size/w1000/2024/01/1616593-1.jpg 1000w,
                    /content/images/size/w2000/2024/01/1616593-1.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="/content/images/size/w600/2024/01/1616593-1.jpg"
            alt="迷途 (Astray) - AI (Lee Ji Eun)"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/ai-iu-astray/">
            <header class="post-card-header">
                <div class="post-card-tags">
                        <span class="post-card-featured"><svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.49365 4.58752C3.53115 6.03752 2.74365 7.70002 2.74365 9.25002C2.74365 10.6424 3.29678 11.9778 4.28134 12.9623C5.26591 13.9469 6.60127 14.5 7.99365 14.5C9.38604 14.5 10.7214 13.9469 11.706 12.9623C12.6905 11.9778 13.2437 10.6424 13.2437 9.25002C13.2437 6.00002 10.9937 3.50002 9.16865 1.68127L6.99365 6.25002L4.49365 4.58752Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
</svg> Featured</span>
                </div>
                <h2 class="post-card-title">
                    迷途 (Astray) - AI (Lee Ji Eun)
                </h2>
            </header>
                <div class="post-card-excerpt">Disclaimer: Songs generated by this AI are for entertainment purposes only and strictly prohibited for commercial use. Not liable for legal consequences.</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2023-11-14">Nov 14, 2023</time>
                <span class="post-card-meta-length">1 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post keep-ratio">

    <a class="post-card-image-link" href="/brush-up-life/">

        <img class="post-card-image"
            srcset="/content/images/size/w300/max/800/1-qmnohe88z8o1ibeoayglua.png 300w,
                    /content/images/size/w600/max/800/1-qmnohe88z8o1ibeoayglua.png 600w,
                    /content/images/size/w1000/max/800/1-qmnohe88z8o1ibeoayglua.png 1000w,
                    /content/images/size/w2000/max/800/1-qmnohe88z8o1ibeoayglua.png 2000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="/content/images/size/w600/max/800/1-qmnohe88z8o1ibeoayglua.png"
            alt="重啟人生 | BRUSH UP LIFE"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/brush-up-life/">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    重啟人生 | BRUSH UP LIFE
                </h2>
            </header>
                <div class="post-card-excerpt">《重啟人生》（ブラッシュアップライフ）是今年度最熱門的日劇之一，它深深觸動了許多人的心靈。</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2023-04-23">Apr 23, 2023</time>
                <span class="post-card-meta-length">4 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post keep-ratio">

    <a class="post-card-image-link" href="/e8-a3-bd-e4-bd-9c-e8-84-86-e6-a2-85-e7-9a-84-e6-99-82-e7-af-80-make-crispy-plum/">

        <img class="post-card-image"
            srcset="/content/images/size/w300/max/800/1-1kj9n9ovro9pacr9jkftsw.jpg 300w,
                    /content/images/size/w600/max/800/1-1kj9n9ovro9pacr9jkftsw.jpg 600w,
                    /content/images/size/w1000/max/800/1-1kj9n9ovro9pacr9jkftsw.jpg 1000w,
                    /content/images/size/w2000/max/800/1-1kj9n9ovro9pacr9jkftsw.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="/content/images/size/w600/max/800/1-1kj9n9ovro9pacr9jkftsw.jpg"
            alt="製作脆梅的時節 / Make Crispy Plum"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/e8-a3-bd-e4-bd-9c-e8-84-86-e6-a2-85-e7-9a-84-e6-99-82-e7-af-80-make-crispy-plum/">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    製作脆梅的時節 / Make Crispy Plum
                </h2>
            </header>
                <div class="post-card-excerpt">製作脆梅一直是我們家重要的儀式，每年我們都會在年初與信義鄉的小農預訂青梅，並以此製作脆梅。</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2023-04-16">Apr 16, 2023</time>
                <span class="post-card-meta-length">3 min read</span>
        </footer>

    </div>

</article>
                </div>
            </aside>



    </div>

    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="https://blog.cmwang.net">Liberation Notes</a> &copy; 2024</section>
            <nav class="site-footer-nav">
                
            </nav>
            <div class="gh-powered-by"><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>

</div>

    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="pswp__bg"></div>

    <div class="pswp__scroll-wrap">
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="/assets/built/casper.js?v=9aaa8e31ca"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>

<style>
.gh-foot-menu {
    display: none;
}

.gh-powered-by {
    display: none;
}
</style>

</body>
</html>
